<html lang="ru"><head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <link rel="shortcut icon" href="/images/logo.png" type="image/png">
    
  <title>Политика конфиденциальности PCRADIO: сайт, приложения для Android и iOS</title>
  <meta name="description" content="Политика конфиденциальности: на этой странице описаны основные действующие правила, связанные со сбором, использованием и хранением личных данных пользователя сервиса PCRADIO">
  <meta property="og:title" content="Политика конфиденциальности PCRADIO: сайт, приложения для Android и iOS">
  <meta property="og:description" content="Политика конфиденциальности: на этой странице описаны основные действующие правила, связанные со сбором, использованием и хранением личных данных пользователя сервиса PCRADIO">
  <meta property="og:type" content="article">
      <meta property="og:image" content="https://pcradio.ru/images/static/62852dda85503.jpg"> 
   
      
          <meta property="og:image" content="https://pcradio.ru/images/stations/cover-off.jpg">
      <meta property="og:url" content="https://pcradio.ru/privacy_policy/privacy_policy_ru"> 
    
  <link rel="canonical" href="https://pcradio.ru/privacy_policy/privacy_policy_ru"> 
  <!--
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&amp;subset=cyrillic-ext" rel="stylesheet">
  -->
  <link rel="stylesheet" href="/frontend/web/css/bootstrap-rating.css">
  <link rel="stylesheet" href="/frontend/web/css/select2.css">
  <link rel="stylesheet" href="/frontend/web/css/jquery.formstyler.css">
  <link rel="stylesheet" href="/frontend/web/css/jquery.formstyler.theme.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
  <link href="/assets/fbf3de41/css/bootstrap.css" rel="stylesheet">
<link href="/css/site_26.css" rel="stylesheet">  <link rel="stylesheet" href="/frontend/web/css/loader.css">
  <script>
    if ( /^((?!chrome|android).)*safari/i.test(navigator.userAgent)) {
      if(!/iPhone|iPad|iPod/i.test(navigator.userAgent)){
        var link = document.createElement( "link" );
        link.href = "/frontend/web/css/safari.css";
        link.rel = "stylesheet";
        document.getElementsByTagName( "head" )[0].appendChild( link );
      }
    }
  </script>
    <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0184729216668333" crossorigin="anonymous"></script>
  </head>
<body class="privacy-page-body">




<div id="overflow" style="position: fixed;width: 100%;height: 100%;left: 0;top: 0;background:rgba(255, 255, 255, 0.7);z-index: 100000000;"></div>
<div class="ajax-big-loader"></div>

    <div class="alert-block success">
      <!--<img class="icon" alt="" src="/images/success-action.png">-->
      <span></span>
      <img class="icon-close-alert" alt="" src="/images/icon-close-w.png">
    </div>
    <div class="alert-block fail">
      <!--<img class="icon" alt="" src="/images/fail-action.png">-->
      <span></span>
      <img class="icon-close-alert" alt="" src="/images/icon-close-w.png">
    </div>
<div id="body-inner">


<div class="wrap"> 
  <div class="container">


  <div class="dropdown-country-list dropdown-mainmenu-list">
      <img alt="" class="dropdown-window-close" src="/images/modal-close.png">
      <input class="country-search" type="text"><div class="country-search-img"></div>
      <div class="contry-sorting">
          <div class="country-sort-item active" data-sort="popular">Популярность</div>
          <div class="country-sort-item" data-sort="alpha">Алфавитный</div>
      </div>
      <div class="dropdown-top-block dropdown-control-block">
        <img alt="" src="/images/arrow-left-big.png">
      </div>
      <div class="dropdown-list-inner">
      <div class="genge-link " data-pop="0"><a href="/strana/rossiya">Россия <span class="genre-stations-count">14229777</span></a></div><div class="genge-link " data-pop="1"><a href="/strana/germaniya">Германия <span class="genre-stations-count">881997</span></a></div><div class="genge-link " data-pop="2"><a href="/strana/ssha">США <span class="genre-stations-count">666638</span></a></div><div class="genge-link " data-pop="3"><a href="/strana/belarus">Беларусь <span class="genre-stations-count">476791</span></a></div><div class="genge-link " data-pop="4"><a href="/strana/ukraina">Украина <span class="genre-stations-count">391551</span></a></div><div class="genge-link " data-pop="5"><a href="/strana/franciya">Франция <span class="genre-stations-count">355961</span></a></div><div class="genge-link " data-pop="6"><a href="/strana/ispaniya">Испания <span class="genre-stations-count">295519</span></a></div><div class="genge-link " data-pop="7"><a href="/strana/velikobritaniya">Великобритания <span class="genre-stations-count">284772</span></a></div><div class="genge-link " data-pop="8"><a href="/strana/azerbaydzhan">Азербайджан <span class="genre-stations-count">187510</span></a></div><div class="genge-link " data-pop="9"><a href="/strana/italiya">Италия <span class="genre-stations-count">140029</span></a></div><div class="genge-link " data-pop="10"><a href="/strana/shveycariya">Швейцария <span class="genre-stations-count">127446</span></a></div><div class="genge-link " data-pop="11"><a href="/strana/kanada">Канада <span class="genre-stations-count">91675</span></a></div><div class="genge-link " data-pop="12"><a href="/strana/niderlandy">Нидерланды <span class="genre-stations-count">84472</span></a></div><div class="genge-link " data-pop="13"><a href="/strana/slovakiya">Словакия <span class="genre-stations-count">83067</span></a></div><div class="genge-link " data-pop="14"><a href="/strana/estoniya">Эстония <span class="genre-stations-count">76638</span></a></div><div class="genge-link " data-pop="15"><a href="/strana/rumyniya">Румыния <span class="genre-stations-count">71624</span></a></div><div class="genge-link " data-pop="16"><a href="/strana/izrail">Израиль <span class="genre-stations-count">66868</span></a></div><div class="genge-link " data-pop="17"><a href="/strana/polsha">Польша <span class="genre-stations-count">65579</span></a></div><div class="genge-link " data-pop="18"><a href="/strana/chehiya">Чехия <span class="genre-stations-count">64742</span></a></div><div class="genge-link " data-pop="19"><a href="/strana/armeniya">Армения <span class="genre-stations-count">64569</span></a></div><div class="genge-link " data-pop="20"><a href="/strana/indiya">Индия <span class="genre-stations-count">57374</span></a></div><div class="genge-link " data-pop="21"><a href="/strana/kazahstan">Казахстан <span class="genre-stations-count">54272</span></a></div><div class="genge-link " data-pop="22"><a href="/strana/uzbekistan">Узбекистан <span class="genre-stations-count">51213</span></a></div><div class="genge-link " data-pop="23"><a href="/strana/braziliya">Бразилия <span class="genre-stations-count">50057</span></a></div><div class="genge-link " data-pop="24"><a href="/strana/greciya">Греция <span class="genre-stations-count">49236</span></a></div><div class="genge-link " data-pop="25"><a href="/strana/avstraliya">Австралия <span class="genre-stations-count">42594</span></a></div><div class="genge-link " data-pop="26"><a href="/strana/turciya">Турция <span class="genre-stations-count">42284</span></a></div><div class="genge-link " data-pop="27"><a href="/strana/vengriya">Венгрия <span class="genre-stations-count">38912</span></a></div><div class="genge-link " data-pop="28"><a href="/strana/avstriya">Австрия <span class="genre-stations-count">37631</span></a></div><div class="genge-link " data-pop="29"><a href="/strana/shveciya">Швеция <span class="genre-stations-count">36311</span></a></div><div class="genge-link " data-pop="30"><a href="/strana/latviya">Латвия <span class="genre-stations-count">32597</span></a></div><div class="genge-link " data-pop="31"><a href="/strana/norvegiya">Норвегия <span class="genre-stations-count">26069</span></a></div><div class="genge-link " data-pop="32"><a href="/strana/belgiya">Бельгия <span class="genre-stations-count">25744</span></a></div><div class="genge-link " data-pop="33"><a href="/strana/bolgariya">Болгария <span class="genre-stations-count">25185</span></a></div><div class="genge-link " data-pop="34"><a href="/strana/moldova">Молдова <span class="genre-stations-count">23911</span></a></div><div class="genge-link " data-pop="35"><a href="/strana/finlyandiya">Финляндия <span class="genre-stations-count">22864</span></a></div><div class="genge-link " data-pop="36"><a href="/strana/horvatiya">Хорватия <span class="genre-stations-count">20389</span></a></div><div class="genge-link " data-pop="37"><a href="/strana/kirgiziya">Киргизия <span class="genre-stations-count">20324</span></a></div><div class="genge-link " data-pop="38"><a href="/strana/litva">Литва <span class="genre-stations-count">14903</span></a></div><div class="genge-link " data-pop="39"><a href="/strana/chili">Чили <span class="genre-stations-count">14050</span></a></div><div class="genge-link " data-pop="40"><a href="/strana/irlandiya">Ирландия <span class="genre-stations-count">12810</span></a></div><div class="genge-link " data-pop="41"><a href="/strana/meksika">Мексика <span class="genre-stations-count">12733</span></a></div><div class="genge-link " data-pop="42"><a href="/strana/shri-lanka">Шри-Ланка <span class="genre-stations-count">11860</span></a></div><div class="genge-link " data-pop="43"><a href="/strana/portugaliya">Португалия <span class="genre-stations-count">11422</span></a></div><div class="genge-link " data-pop="44"><a href="/strana/yaponiya">Япония <span class="genre-stations-count">10899</span></a></div><div class="genge-link " data-pop="45"><a href="/strana/daniya">Дания <span class="genre-stations-count">10091</span></a></div><div class="genge-link " data-pop="46"><a href="/strana/serbiya">Сербия <span class="genre-stations-count">8863</span></a></div><div class="genge-link " data-pop="47"><a href="/strana/kolumbiya">Колумбия <span class="genre-stations-count">7303</span></a></div><div class="genge-link " data-pop="48"><a href="/strana/novaya-zelandiya">Новая Зеландия <span class="genre-stations-count">6214</span></a></div><div class="genge-link " data-pop="49"><a href="/strana/gruziya">Грузия <span class="genre-stations-count">5955</span></a></div><div class="genge-link " data-pop="50"><a href="/strana/argentina">Аргентина <span class="genre-stations-count">5716</span></a></div><div class="genge-link " data-pop="51"><a href="/strana/kuveyt">Кувейт <span class="genre-stations-count">5550</span></a></div><div class="genge-link " data-pop="52"><a href="/strana/iran">Иран <span class="genre-stations-count">5308</span></a></div><div class="genge-link " data-pop="53"><a href="/strana/livan">Ливан <span class="genre-stations-count">4761</span></a></div><div class="genge-link " data-pop="54"><a href="/strana/tailand">Таиланд <span class="genre-stations-count">4716</span></a></div><div class="genge-link " data-pop="55"><a href="/strana/dominikanskaya-respublika">Доминиканская Республика <span class="genre-stations-count">4041</span></a></div><div class="genge-link " data-pop="56"><a href="/strana/ekvador">Эквадор <span class="genre-stations-count">3942</span></a></div><div class="genge-link " data-pop="57"><a href="/strana/boliviya">Боливия <span class="genre-stations-count">3381</span></a></div><div class="genge-link " data-pop="58"><a href="/strana/oae">ОАЭ <span class="genre-stations-count">3287</span></a></div><div class="genge-link " data-pop="59"><a href="/strana/peru">Перу <span class="genre-stations-count">2779</span></a></div><div class="genge-link " data-pop="60"><a href="/strana/yuzhnaya-koreya">Южная Корея <span class="genre-stations-count">2658</span></a></div><div class="genge-link " data-pop="61"><a href="/strana/angola">Ангола <span class="genre-stations-count">2640</span></a></div><div class="genge-link " data-pop="62"><a href="/strana/singapur">Сингапур <span class="genre-stations-count">2634</span></a></div><div class="genge-link " data-pop="63"><a href="/strana/yamayka">Ямайка <span class="genre-stations-count">2599</span></a></div><div class="genge-link " data-pop="64"><a href="/strana/gaiti">Гаити <span class="genre-stations-count">2291</span></a></div><div class="genge-link " data-pop="65"><a href="/strana/sloveniya">Словения <span class="genre-stations-count">2261</span></a></div><div class="genge-link " data-pop="66"><a href="/strana/tadzhikistan">Таджикистан <span class="genre-stations-count">2251</span></a></div><div class="genge-link " data-pop="67"><a href="/strana/islandiya">Исландия <span class="genre-stations-count">2193</span></a></div><div class="genge-link " data-pop="68"><a href="/strana/kitay">Китай <span class="genre-stations-count">2145</span></a></div><div class="genge-link " data-pop="69"><a href="/strana/lyuksemburg">Люксембург <span class="genre-stations-count">2015</span></a></div><div class="genge-link " data-pop="70"><a href="/strana/saudovskaya-araviya">Саудовская Аравия <span class="genre-stations-count">1986</span></a></div><div class="genge-link " data-pop="71"><a href="/strana/mongoliya">Монголия <span class="genre-stations-count">1921</span></a></div><div class="genge-link " data-pop="72"><a href="/strana/indoneziya">Индонезия <span class="genre-stations-count">1849</span></a></div><div class="genge-link " data-pop="73"><a href="/strana/yuar">ЮАР <span class="genre-stations-count">1849</span></a></div><div class="genge-link " data-pop="74"><a href="/strana/malta">Мальта <span class="genre-stations-count">1734</span></a></div><div class="genge-link " data-pop="75"><a href="/strana/siriya">Сирия <span class="genre-stations-count">1719</span></a></div><div class="genge-link " data-pop="76"><a href="/strana/bosniya-i-gercegovina">Босния и Герцеговина <span class="genre-stations-count">1637</span></a></div><div class="genge-link " data-pop="77"><a href="/strana/venesuela">Венесуэла <span class="genre-stations-count">1602</span></a></div><div class="genge-link " data-pop="78"><a href="/strana/kuba">Куба <span class="genre-stations-count">1565</span></a></div><div class="genge-link " data-pop="79"><a href="/strana/tunis">Тунис <span class="genre-stations-count">1416</span></a></div><div class="genge-link " data-pop="80"><a href="/strana/panama">Панама <span class="genre-stations-count">1409</span></a></div><div class="genge-link " data-pop="81"><a href="/strana/namibiya">Намибия <span class="genre-stations-count">1406</span></a></div><div class="genge-link " data-pop="82"><a href="/strana/kipr">Кипр <span class="genre-stations-count">1389</span></a></div><div class="genge-link " data-pop="83"><a href="/strana/albaniya">Албания <span class="genre-stations-count">1340</span></a></div><div class="genge-link " data-pop="84"><a href="/strana/nigeriya">Нигерия <span class="genre-stations-count">1133</span></a></div><div class="genge-link " data-pop="85"><a href="/strana/gana">Гана <span class="genre-stations-count">1060</span></a></div><div class="genge-link " data-pop="86"><a href="/strana/bangladesh">Бангладеш <span class="genre-stations-count">1030</span></a></div><div class="genge-link " data-pop="87"><a href="/strana/urugvay">Уругвай <span class="genre-stations-count">1025</span></a></div><div class="genge-link " data-pop="88"><a href="/strana/kosta-rika">Коста-Рика <span class="genre-stations-count">971</span></a></div><div class="genge-link " data-pop="89"><a href="/strana/filippiny">Филиппины <span class="genre-stations-count">891</span></a></div><div class="genge-link " data-pop="90"><a href="/strana/tayvan">Тайвань <span class="genre-stations-count">858</span></a></div><div class="genge-link " data-pop="91"><a href="/strana/malayziya">Малайзия <span class="genre-stations-count">782</span></a></div><div class="genge-link " data-pop="92"><a href="/strana/marokko">Марокко <span class="genre-stations-count">779</span></a></div><div class="genge-link " data-pop="93"><a href="/strana/gibraltar">Гибралтар <span class="genre-stations-count">769</span></a></div><div class="genge-link " data-pop="94"><a href="/strana/gvatemala">Гватемала <span class="genre-stations-count">758</span></a></div><div class="genge-link " data-pop="95"><a href="/strana/mavrikiy">Маврикий <span class="genre-stations-count">673</span></a></div><div class="genge-link " data-pop="96"><a href="/strana/ostrov-men">Остров Мэн <span class="genre-stations-count">471</span></a></div><div class="genge-link " data-pop="97"><a href="/strana/makedoniya">Македония <span class="genre-stations-count">331</span></a></div><div class="genge-link " data-pop="98"><a href="/strana/barbados">Барбадос <span class="genre-stations-count">302</span></a></div>      </div>
      <div class="dropdown-bottom-block dropdown-control-block">
        <img alt="" src="/images/arrow-right-big.png">
      </div>
    </div>

    
    <div class="dropdown-genres-list dropdown-mainmenu-list">
      <img alt="" class="dropdown-window-close" src="/images/modal-close.png">
      <input class="genre-search" type="text"><div class="genre-search-img"></div>
      <div class="genre-sorting">
          <div class="genre-sort-item active" data-sort="popular">Популярность</div>
          <div class="genre-sort-item" data-sort="alpha">Алфавитный</div>
      </div>
      <div class="dropdown-top-block dropdown-control-block">
        <img alt="" src="/images/arrow-left-big.png">
      </div>
      <div class="dropdown-list-inner">
      <div class="genge-link " data-pop="0"><a href="/zhanr/pop">Поп <span class="genre-stations-count">4485758</span></a></div><div class="genge-link " data-pop="1"><a href="/zhanr/dance">Танцевальная <span class="genre-stations-count">4024329</span></a></div><div class="genge-link " data-pop="2"><a href="/zhanr/electronic">Электронная <span class="genre-stations-count">3530150</span></a></div><div class="genge-link " data-pop="3"><a href="/zhanr/past-decades">Прошлых лет <span class="genre-stations-count">2098335</span></a></div><div class="genge-link " data-pop="4"><a href="/zhanr/discography">Дискография <span class="genre-stations-count">1616335</span></a></div><div class="genge-link " data-pop="5"><a href="/zhanr/relax-easy-listening">Релакс, Легкая музыка <span class="genre-stations-count">1516407</span></a></div><div class="genge-link " data-pop="6"><a href="/zhanr/rock">Рок <span class="genre-stations-count">1341521</span></a></div><div class="genge-link " data-pop="7"><a href="/zhanr/news-talk">Новости, Разговорное <span class="genre-stations-count">1055291</span></a></div><div class="genge-link " data-pop="8"><a href="/zhanr/adult-contemporary">Смешанный <span class="genre-stations-count">603059</span></a></div><div class="genge-link " data-pop="9"><a href="/zhanr/russian-shanson">Шансон <span class="genre-stations-count">460730</span></a></div><div class="genge-link " data-pop="10"><a href="/zhanr/jazz-blues-soul">Джаз, Блюз, Соул <span class="genre-stations-count">421889</span></a></div><div class="genge-link " data-pop="11"><a href="/zhanr/audiobooks">Аудиокниги <span class="genre-stations-count">406055</span></a></div><div class="genge-link " data-pop="12"><a href="/zhanr/folk-ethnic">Национальная <span class="genre-stations-count">334932</span></a></div><div class="genge-link " data-pop="13"><a href="/zhanr/religion">Религия, Духовная <span class="genre-stations-count">301595</span></a></div><div class="genge-link " data-pop="14"><a href="/zhanr/misc">Разное <span class="genre-stations-count">295289</span></a></div><div class="genge-link " data-pop="15"><a href="/zhanr/humor">Юмор <span class="genre-stations-count">287770</span></a></div><div class="genge-link " data-pop="16"><a href="/zhanr/yoga-spa-meditation">Йога, Спа, Медитация <span class="genre-stations-count">281132</span></a></div><div class="genge-link " data-pop="17"><a href="/zhanr/rap-hip-hop-rnb">Рэп, Хип-хоп, RnB <span class="genre-stations-count">256449</span></a></div><div class="genge-link " data-pop="18"><a href="/zhanr/classical">Классика <span class="genre-stations-count">245447</span></a></div><div class="genge-link " data-pop="19"><a href="/zhanr/metal">Метал <span class="genre-stations-count">218035</span></a></div><div class="genge-link " data-pop="20"><a href="/zhanr/funk-disco">Фанк, Диско <span class="genre-stations-count">121417</span></a></div><div class="genge-link " data-pop="21"><a href="/zhanr/childrens">Детям <span class="genre-stations-count">114195</span></a></div><div class="genge-link " data-pop="22"><a href="/zhanr/game-anime">Игровое, Аниме <span class="genre-stations-count">103949</span></a></div><div class="genge-link " data-pop="23"><a href="/zhanr/indie">Инди <span class="genre-stations-count">94506</span></a></div><div class="genge-link " data-pop="24"><a href="/zhanr/country-americana-bluegrass">Кантри, Американа, Блюграс <span class="genre-stations-count">64466</span></a></div><div class="genge-link " data-pop="25"><a href="/zhanr/ska-rocksteady-reggae">Ска, Рокстеди, Регги <span class="genre-stations-count">24815</span></a></div><div class="genge-link " data-pop="26"><a href="/zhanr/sports">Спорт <span class="genre-stations-count">19968</span></a></div>      </div>
      <div class="dropdown-bottom-block dropdown-control-block">
        <img alt="" src="/images/arrow-right-big.png">
      </div>
    </div>

    <div class="dropdown-search-window">
       <img alt="" class="seach-window-close" src="/images/modal-close.png">
       <div class="row global">
       <div class="col-md-12 mainbar">
       <input type="text" class="total-search-input" placeholder="Название" data-ps="Название">
       <div class="total-search-input-img"></div>
       <div class="full-list">
      <div class="stations-list wo-controls total-search-results">
       
       </div>
            </div>
            </div>
            </div>
    </div>


    <header>
      <div class="age-limit">12+</div>
      <a class="mobile-favorite only-mobile" href="/favorites"><img alt="" src="/images/favor2.png"></a>
      <a class="search-button mobile-search-button only-mobile" href="/"><img alt="" src="/images/icon-search.png"></a>
    <nav id="w0" class="navbar navbar-default"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w0-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="/images/logo.png" alt="" title="PCRadio - слушай онлайн радио бесплатно"> <span class="big-logo-text">PCRADIO</span> <span class="small-logo-text">Радио онлайн</span> </a></div><div id="w0-collapse" class="collapse navbar-collapse"><ul id="w1" class="navbar-nav nav"><li><a class="search-button" href="/"><img alt="" class="menu-icon" src="/images/icon-search.png">Поиск</a></li>
<li><a class="stsions-button" href="/radiostations"><img alt="" class="menu-icon" src="/images/icon-stations.png">Станции</a></li>
<li><a class="genres-list-button close-genres" href="/"><img alt="" class="menu-icon" src="/images/icon-genres.png">Жанры<img alt="" class="menu-right" src="/images/caret-right.png"></a></li>
<li><a class="country-list-button close-countries" href="/"><img alt="" class="menu-icon" src="/images/icon-country.png">Страны<img alt="" class="menu-right" src="/images/caret-right.png"></a></li>
<li><a href="/favorites"><img alt="" class="menu-icon" src="/images/favor2.png">Избранные</a></li>
<li><a href="/recently"><img alt="" class="menu-icon" src="/images/icon-recently.png">Недавние</a></li>
<li><a class="apps-list-button close-apps" href="/"><img alt="" class="menu-icon" src="/images/icon-apps.png">Приложения<img alt="" class="menu-right menu-app" src="/images/caret-right.png"></a></li>
<li><a class="apps-list-item hidden-item" href="/play-android.html"><img alt="" class="menu-icon" src="/images/icon-android.png">Для Android</a></li>
<li><a class="apps-list-item hidden-item" href="/player-ios"><img alt="" class="menu-icon" src="/images/icon-apple.png">Для iOS</a></li>
<li><a class="user no-login-user menu-separator" href="/"><img alt="" class="menu-icon" src="/images/icon-user.png">Войти</a></li></ul>
    </div></div></nav>    <!--
    <div class='right-part-header'>
      <a class='goto-favor' href='/favorites'><img alt='' src='/images/favor.png'></a>
      <span class='user no-login-user'>
         <img alt=''  src='/images/nouser.png'>
      </span>
          </div>
            -->

    </header>

    <input type="hidden" class="station_id" value="0" data-server="0" data-alias="">


 

<input type="hidden" class="volume" value="80">
<input type="hidden" class="quality" value="med">

<div id="loginBox" class="modal fade" data-backdrop="static" data-keyboard="false"></div>
<div id="signupBox" class="modal  fade" data-backdrop="static" data-keyboard="false"></div>
<div id="rememberBox" class="modal  fade" data-backdrop="static" data-keyboard="false"></div> 
<div id="letterBox" class="modal  fade"></div> 
<div id="dialogBox" class="modal fade" data-backdrop="static" data-keyboard="false"></div>
<div id="screenshotBox" class="modal  fade">
<div class="modal-dialog modal-dialog-centered">
  <div class="modal-content">
    <div class="modal-header">
      <button class="close" data-dismiss="modal" aria-hidden="true"><img alt="" src="/images/modal-close.png"></button>   
    </div>
    
    <div class="modal-body">
      <img alt="" src="/images/1px.png">
    </div>
    <div class="modal-footer">
    </div> 
  </div>
</div>  
</div> 
<div id="deleteprofileBox" class="modal  fade">
<div class="modal-dialog modal-dialog-centered">
  <div class="modal-content">
    <div class="modal-header">
      <button class="close" data-dismiss="modal" aria-hidden="true"><img alt="" src="/images/modal-close.png"></button>   
      <h4 class="modal-title">Вы хотите удалить профиль?</h4>
    </div>
    
    <div class="modal-body">
      <input class="current-password" type="hidden">
    </div>
    <div class="modal-footer">
      <button class="delete-profile-confirm">Удалить</button>
    </div> 
  </div>
</div>  
</div> 



        <div class="row global">

  <div class="col-md-12 mainbar">

  <h1 class="stations-list-title">Политика конфиденциальности PCRADIO: сайт, приложения для Android и iOS</h1>

  <div class="privacy_langs">
    Языки: <a href="/privacy_policy/privacy_policy_ru">Русский</a>, <a href="/privacy_policy/privacy_policy_en">Английский</a>
  </div>    
<div class="policy-text">
  <p>Администрация сервиса потокового онлайн радио <strong>«PCRADIO</strong>» обязуется сохранять вашу конфиденциальность в Интернете. Мы уделяем большое значение охране предоставленных вами данных. Наша политика конфиденциальности основана на требованиях Общего регламента о защите персональных данных Европейского Союза (GDPR). Цели, в которых мы собираем персональные данные: улучшение работы нашего сервиса, осуществление контактов с посетителями данного сайта, новостная рассылка по электронной почте, осуществление услуг, связанных с направлением деятельности данного сайта, для создания личного профиля пользователя на сайте в процессе авторизации, а так же для указанных ниже действий.</p><p>Если у вас есть какие-либо вопросы, вы хотели бы поделиться предложениями по улучшению Политики конфиденциальности или Сервиса или иным образом хотели бы связаться с нами, пожалуйста, свяжитесь с нами, заполнив контактную форму на <a href="http://pcradio.ru/mail.html">https://pcradio.ru/mail.html</a></p><h2>1. Мобильные приложения «PCRADIO» для Android и iOS</h2><p><strong>Названия версий для Android:</strong> «Онлайн радио PCRADIO», «Радио онлайн - PCRADIO 2016»</p><p>Мы принимаем меры для обеспечения безопасного обращения с любой информацией, которую предоставляют нам наши пользователи, в соответствии с настоящей Политикой конфиденциальности.&nbsp;</p><h3>1.1 Изменения в политике конфиденциальности:</h3><p>Настоящая Политика конфиденциальности может быть изменена после выпуска новых версий (обновлений) мобильных приложений и добавления новых функций в приложения.</p><h3>1.2 Сбор информации:</h3><p>Мы не собираем и не храним личные данные наших пользователей. Мы предоставляем услуги поиска в приложении по запросу пользователей. При использовании поиска - приложение применяет информацию, полученную при использовании приложения. Мы не сохраняем и не храним поисковые фразы, а также не собираем статистику поисковых данных на сторонних серверах.</p><p>Анонимная информация, которую мы можем получать о наших пользователях из сторонних сервисов (таких как Google Analytics, Google Play и др.), Может включать: информацию об установке (тип ОС, версия ОС), информацию об устройстве (модель устройства, версия ОС) и информацию о пользователе, действия, IP адрес, информацию из логов и журналов устройства.</p><p>Вся собранная информация является анонимной и используется только для мониторинга и анализа использования Сервиса, а также для улучшения Сервиса.</p><p>Мы сознательно не собираем, не храним и не используем личную информацию от детей.</p><p>Ссылка на политику конфиденциальности сторонних поставщиков услуг, используемых приложением:</p><p><strong>Сервисы Google Play:</strong><br><a href="https://www.google.com/policies/privacy/">https://www.google.com/policies/privacy/</a></p><p><strong>Google AdMob:</strong><br><a href="https://support.google.com/admob/answer/6128543?hl=ru">https://support.google.com/admob/answer/6128543?hl=ru</a></p><p><strong>Google Аналитика для Firebase:</strong><br><a href="https://firebase.google.com/policies/analytics">https://firebase.google.com/policies/analytics</a></p><p><strong>Firebase Crashlytics:</strong><br><a href="https://firebase.google.com/support/privacy/">https://firebase.google.com/support/privacy/</a></p><p><strong>Яндекс (сервисы и реклама)</strong><br><a href="https://yandex.ru/legal/confidential/">https://yandex.ru/legal/confidential/</a></p><h3>1.3 Потоковое радио (веб-радио):</h3><p>Чтобы получить Политику конфиденциальности любой станции в списке приложения, обратитесь на официальную веб-страницу этой станции.</p><h3>1.4 Фоновое воспроизведение:</h3><p>Приложения могут выполнять фоновое воспроизведение, используя функции вашей ОС. Вы можете слушать радио, одновременно выполняя другие задачи на вашем устройстве.</p><h3>1.5 Учетные записи пользователей:</h3><p>Наши приложения не используют учетные записи пользователей. Наши приложения не требуют ввода личных данных. Мы не собираем информацию о местонахождении пользователей.</p><h3>1.6 Потоковые серверы:</h3><p>Наши приложения являются лишь посредником между пользователем и серверами потокового вещания. Приложения не передают никакой информации сторонним потоковым серверам.</p><h3>1.7 Разрешение READ_PHONE_STATE <strong>PERMISSION</strong>:</h3><p>Это разрешение используется для остановки воспроизведения потокового радио при получении входящего телефонного звонка и для возобновления воспроизведения после завершения телефонного звонка.</p><p>Мы не несем ответственности за последствия использования наших приложений, включая сбои в работе устройства или программного обеспечения.</p><h2>2. Сбор и использование персональных данных сайтом pcradio.ru</h2><p>Мы собираем и используем ваши персональные данные только в случае вашего добровольного согласия. При согласии с этим вы разрешаете нам собирать и использовать следующие данные: имя и фамилия, дата рождения, электронная почта, личные фотографии, идентификаторы электронных кошельков, данные аккаунтов в социальных сетях. Сбор и обработка ваших данных проводится соответствии с законами, действующими на территории Европейского Союза и в государстве Россия.</p><h3>2.1 Хранение данных, изменение и удаление</h3><p>Пользователь, предоставивший свои персональные данные сайту pcradio.ru имеет право на их изменение и удаление, а так же на отзыв своего согласия с их использованием. Срок, в течение которого будут храниться ваши персональные данные: время, необходимое для использования данных для основной деятельности сайта. При завершении использования ваших данных администрация сайта удаляет их. Для доступа к своим персональным данным вы можете связаться с администрацией сайта по следующему адресу: support@pcradio.ru. Мы можем передавать ваши личные данные третьей стороне только с вашего добровольного согласия, если они были переданы, то изменение данных в других организациях, не связанных с нами, мы осуществить не можем.</p><h3>2.2 Использование технических данных при посещении сайта</h3><p>При посещении вами сайта pcradio.ru в базе данных сохраняются записи о вашем IP адресе, времени посещения, настройках браузера, операционной системе, а также другая техническая информация необходимая для корректного отображения содержимого сайта. По этим данным нам невозможно идентифицировать личность посетителя.</p><h3>2.3 Предоставление информации детьми</h3><p>Если Вы являетесь родителем или опекуном, и вы знаете, что ваши дети предоставили нам свои личные данные без Вашего согласия, свяжитесь с нами: support@pcradio.ru На нашем сервисе запрещено оставлять личные данные несовершеннолетних без согласия родителей или опекунов.</p><h3>2.4 Использование cookies</h3><p>Для корректного отображения содержимого и для удобства использования сайта pcradio.ru мы используем cookie файлы. Это небольшие файлы, которые хранятся на вашем устройстве. Они помогают сайту запомнить информацию о вас, например на каком языке вы просматриваете сайт и какие страницы вы уже открывали, эта информация будет полезна при следующем посещении. Благодаря файлам cookie просмотр сайта становится значительно более удобным. Подробнее про эти файлы вы можете прочитать тут. Вы можете настроить прием или блокировку cookie в браузере самостоятельно. Невозможность принимать cookie может ограничить работоспособность сайта.</p><h3>2.5 Использование персональных данных другими сервисами</h3><p>На этом сайте используются сторонние интернет-сервисы, осуществляющие независимый от нас сбор информации: Google Analytics , Google AdSense, Yandex.Metrica, Yandex.Direct. Собранные ими данные могут предоставляться другим службам внутри этих организаций, они могут использовать данные для персонализации рекламы своей собственной рекламной сети. Вы можете прочитать пользовательские соглашения этих организаций на их сайтах. Мы не передаем персональные данные другим организациям и службам, не указанным в данной политике конфиденциальности. Исключение составляет только передача информации при законных требованиях государственных органов уполномоченных осуществлять данные действия.</p><h3>2.6 Ссылки на другие сайты</h3><p>Наш сайт pcradio.ru может содержать ссылки на другие сайты, которые не управляются нами. Мы не несем ответственность за их содержание. Мы рекомендуем вам ознакомиться с политикой конфиденциальности каждого сайта, который вы посещаете, если она там есть.</p><h3>2.7 Изменения в политике конфиденциальности</h3><p>Наш сайт pcradio.ru может обновлять нашу политику конфиденциальности время от времени. Мы сообщаем о любых изменениях, разместив новую политику конфиденциальности на этой странице. Мы отслеживаем изменения законодательства, касающегося персональных данных в Европейском Союзе и в государстве Россия. Если вы оставили персональные данные у нас, то мы оповестим вас об изменении в политике конфиденциальности. Если ваши персональные данные были введены не корректно, то мы не сможем с вами связаться.</p><h3>2.8 Обратная связь, заключительные положения</h3><p>Связаться с администрацией сайта pcradio.ru по вопросам, связанным с политикой конфиденциальности можно по адресу: support@pcradio.ru, либо с помощью контактной формы указанной в соответствующем разделе данного сайта. Если вы не согласны с данной политикой конфиденциальности, вы не можете пользоваться услугами сайта pcradio.ru, в этом случае вы должны воздержаться от посещения нашего сайта.</p></div>
  </div>
  <div class="col-md-4 saidbar"></div>

</div>

<footer class="site-footer">
  <div class="container">
    
    <div class="row clearfix">
                
      <aside class="col-md-3">
        <div class="mobile-margin-bottom footer-logo-text">
        <a href="/">
          <img alt="" class="footer-logo" src="/images/logo-gray.png">
                  <span class="footer-content"><b>PCRADIO</b><p>Радио онлайн</p></span></a>  
         
                
        
       
                 
        </div>
      </aside>
<!--
      <div class="col-xs-6 col-md-2">
        <nav>
          <ul class="footer-main-menu">
              <li class="nav-title">
              Top genres
               </li>

                             <li class="nav-item">
                <a href='/zhanr/pop'>Поп</a>
              </li>
                               <li class="nav-item">
                <a href='/zhanr/dance'>Танцевальная</a>
              </li>
                               <li class="nav-item">
                <a href='/zhanr/electronic'>Электронная</a>
              </li>
                               <li class="nav-item">
                <a href='/zhanr/past-decades'>Прошлых лет</a>
              </li>
                   
          </ul>
        </nav>
      </div>
                 -->


      <div class="col-xs-6 col-md-3">
        <nav>
          <ul class="footer-main-menu">
              <li class="nav-item">
                <a href="/mail.html">Написать нам</a>   
              </li>
              <li class="nav-item">
                <a href="/add_radio">Добавить станцию</a>
              </li> 
              <li class="nav-item">
                <a href="/edit-radio">Обновить данные станции</a>
              </li>
              <!--
              <li class="nav-item">
              <a href='/rules'>Term of Use</a>   
              </li> --> 
          </ul>
        </nav>
      </div>

      <div class="col-xs-6 col-md-3">
        <nav>
          <ul class="footer-main-menu">
              <li class="nav-item">
                Загрузить приложения
              </li> 
              <li class="nav-item">
                <a href="/play-android.html">Для Android</a>
              </li>
                <li class="nav-item">
                <a href="/player-ios">Для iOS </a>   
              </li>
              <!--
              <li class="nav-item">
              <a href='/rules'>Term of Use</a>   
              </li> --> 
          </ul>
        </nav>
      </div>

      <div class="col-xs-6 col-md-3">
        <nav>
          <ul class="clearfix">
              <li class="nav-item">
                <a href="/privacy_policy/privacy_policy_ru">Политика конфиденциальности</a>   
              </li>
              <li class="google-policy">
                 This site is protected by reCAPTCHA and the Google
                 <a href="https://policies.google.com/privacy">Privacy Policy</a> 
                 and <a href="https://policies.google.com/terms">Terms of Service</a> apply.
              </li>
            
          </ul>
        </nav>
      </div>

    </div>
    
  </div>
 </footer>

   



  </div>
</div>

<script src="/assets/3c5a5d7e/jquery.js"></script>
<script src="/assets/2b78fbc9/yii.js"></script>
<script src="/assets/fbf3de41/js/bootstrap.js"></script>
  <input type="hidden" class="playing_id" value="0" data-server="0" data-alias="">


<input type="hidden" class="user_id" value="0">

  <input type="hidden" class="new_stations" value="0">
<input type="hidden" class="action_id" value="privacy">

</div>
<div class="emojiPicker">
</div>
<div class="bottom-player">
  
  <a class="station-return" href="">
    <img alt="" class="song-cover" src="/images/1px.png">
  </a>
  <div class="song">
    <a class="song-title station-return" href=""></a>
    <div class="song-title-wrapper">
      <div class="song-title-inner">
        <div class="song-artist"></div><div class="song-artist"></div>
      </div>
    </div>    
  </div> 

  <div class="bottom-station-block">

    <a class="station-return" href="">
    <img alt="" class="station-logo" src="/images/1px.png">
    <div class="station-title"></div>
    </a>

    <div class="quality-block" data-hint="Изменить скорость потока">
              <img class="icon-live-notice" alt="" src="/images/icon-potok-med-blue.png">
              <span class="quality-selector active" data-quality="">Стандарт</span>
              <img class="quality-caret-down" alt="" src="/images/caret-down.png">
    </div>
    <div class="quality-drop-down">
      <img class="icon-close-modal-dropdown" alt="" src="/images/icon-close-modal-dropdown.png">
              
              <div>Качество потока</div>
              <span class="quality-selector hi-quality-selector " data-text="Премиум" data-set-quality="hi" data-quality=""><img class="quality-selected" alt="" data-src="/images/icon-potok-hi-" src="/images/icon-potok-hi-black.png">Премиум</span>
              <span class="quality-selector med-quality-selector selected" data-text="Стандарт" data-set-quality="med" data-quality=""><img class="quality-selected" alt="" data-src="/images/icon-potok-med-" src="/images/icon-potok-med-blue.png">Стандарт</span>
              <span class="quality-selector low-quality-selector " data-text="Эконом" data-set-quality="low" data-quality=""><img class="quality-selected" alt="" data-src="/images/icon-potok-low-" src="/images/icon-potok-low-black.png">Эконом</span>
    </div>

    <span class="favor-button-wrapper" data-title="В избранное">
    <img alt="" class="favor-add add_favor_action" data-station_id="0" src="/images/favor1.png">
</span>
    <div class="jp-stop">
    </div>
    <div class="jp-play">
      <img alt="" src="/images/1px.png" data-potok="" data-server="" data-api_id="0" data-alias="">
    </div>
    <div class="volume-button bottom-mute-button">
      <div class="volume-vert-wrapper">
        <div class="volume-vert"></div>
      </div>
      <img alt="" src="/images/volume-icon.png">
    </div>

  </div>
  <div style="clear:both;"></div>
  <div class="song-mobile">
  <div class="song-mobile-wrapper">
    <div class="song-mobile-inner">
      <div class="song-mobile-inner-inner">
        <div class="song-title"></div>
        <div class="song-artist"></div>
        
      </div>
      <div class="song-mobile-inner-inner">
        <div class="song-title"></div>
        <div class="song-artist"></div>
        
      </div>
    </div>
  </div>
  </div>

</div>

<div class="privacy-block" style="display:none;">
      <span> Мы используем cookie файлы. Пользуясь сайтом, вы соглашаетесь с нашей 
        <a href="/privacy_policy/privacy_policy_ru">Политикой конфиденциальности</a></span>
      <div class="icon-close-alert privacy-close">Принять и закрыть</div>
</div>

<div id="pcradio_c" style="display: none; padding: 0px; width: 500px; height: 375px; line-height: 1; text-align: left; user-select: none; overflow: hidden; background-color: rgb(255, 255, 255);"><radio_player_div style="display: block; position: relative; width: 100%; height: 100%; border: medium none; background-color: rgb(255, 255, 255); user-select: none; overflow: hidden; margin: 0px; padding: 0px;"><radio_player_div style="display: block; position: absolute; top: 0px; left: 0px;"><canvas width="500" height="375"></canvas><radio_player_div style="display: block; position: absolute; top: 0px; left: 0px;"><canvas width="500" height="375"></canvas><div style="background-color: transparent; position: absolute; left: 0px; top: 0px; width: 500px;"><audio style="display: block; position: absolute; top: 0px; left: 0px; width: 0px; height: 0px;" class="radio-media" onplay="function OnPlay() {
        Radio.trace('OnPlay');
        if (!iplay) {
            if (nativecontrols &amp;&amp; !media.controls) {
                CSS(controls, {
                    'visibility': 'hidden'
                });
                media.controls = true;
                Remove('layer');
                media_mc.onclick = null
            }
            if (poster_mc &amp;&amp; vars.m == 'video') {
                poster_mc.style.display = 'none'
            }
            if (play_b != undefined) {
                play_b.c.style.display = 'none';
                pause_b.c.style.display = 'block'
            }
            iplay = true;
            var hide = vars.cntrlhide == 1 &amp;&amp; vars.cntrlout == 0;
            var fullHide = ifull &amp;&amp; vars.fullcntrlhide == 1;
            if (hide || fullHide) {
                clearInterval(hideInterval);
                hideInterval = setInterval(CntrlHide, 3000)
            }
            if (vars.comment != undefined &amp;&amp; vars.comment != '' &amp;&amp; vars.showname == 1) {
                vars.shownameliketip == 1 ? (vars.shownameonstop == 1 ? Hide(nametip) : '') : Hide(alrt)
            }
            if (vars.plplace == &quot;inside&quot; &amp;&amp; playlist) {
                Hide(playlist);
                plnext_b ? Hide(plnext_b.c) : '';
                plprev_b ? Hide(plprev_b.c) : ''
            }
            if (start_b) {
                start_b.c.style.display = 'none'
            }
            if (logo) {
                if (vars.logoplay == 1) {
                    Show(logo)
                } else {
                    Hide(logo)
                }
            }
            Event('play');
            if (radio_active_player_uid != vars.uid) {
                radio_active_player_uid = vars.uid;
                document.addEventListener(&quot;keydown&quot;, KeyHandler)
            }
            if (!istartevnt) {
                Event('start');
                istart = true;
                istartevnt = true
            }
            if (vars.sub &amp;&amp; (vars.substart == 1 || (mobile &amp;&amp; nativecontrols))) {
                CreateSubs()
            }
        }
    }" width="100%" height="375px" x-webkit-airplay="allow" webkit-playsinline="1"></audio></div></radio_player_div><radio_player_div style="display: none; width: 100%; position: absolute; top: 0px; left: 0px; color: rgb(255, 255, 255); z-index: 3;" class="radio-alert"><radio_player_div style="display: block;"><canvas width="500" height="20"></canvas></radio_player_div><radio_player_div style="display: block; position: absolute; top: 0px; left: 0px; padding-top: 10px; padding-left: 15px; padding-bottom: 13px; font-family: Verdana; font-size: 11px; font-style: normal; font-weight: normal;"></radio_player_div><radio_player_div style="display: block; position: absolute; top: 0px; right: 0px; padding-top: 5px; padding-right: 10px; cursor: pointer; color: rgb(255, 255, 255);">x</radio_player_div></radio_player_div><radio_player_div style="display: none; z-index: 103; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;" class="radio-mouse-move-catcher"></radio_player_div><radio_player_div style="display: block; width: 100%; height: 0px; position: absolute; top: 0px; left: 0px; z-index: 2;" id="layer"></radio_player_div><radio_player_div style="display: block; position: absolute; z-index: 5; top: 340px; left: 0px;" class="radio-control_control_bar"><radio_player_div style="display: block;" id="uibg"><canvas style="position: absolute; top: 0px; left: 0px;" width="500" height="35"></canvas></radio_player_div><radio_player_div style="display: block; cursor: pointer; position: absolute; top: 7.5px; left: 7px;" class="radio-control_play"><canvas style="width: 20px; height: 20px; position: absolute; top: 0px; left: 0px; opacity: 1;" width="20" height="20"></canvas></radio_player_div><radio_player_div style="display: none; cursor: pointer; position: absolute; top: 7.5px; left: 7px;" class="radio-control_pause"><canvas style="width: 20px; height: 20px; position: absolute; top: 0px; left: 0px; opacity: 1;" width="20" height="20"></canvas></radio_player_div><radio_player_div style="display: block; width: 30px; color: rgb(255, 255, 255); font: 10px Verdana; text-align: center; margin: 0px; cursor: default; position: absolute; top: 10.5px; white-space: nowrap; left: 32px;" class="radio-control_time_play">0:00<canvas style="width: 30px; height: 20px; position: absolute; top: 0px; left: 0px; opacity: 1;" width="30" height="20"></canvas></radio_player_div><radio_player_div style="display: block; cursor: pointer; position: absolute; top: 7.5px; left: 67px;" class="radio-control_volume"><canvas style="width: 20px; height: 20px; position: absolute; top: 0px; left: 0px; opacity: 1;" width="20" height="20"></canvas></radio_player_div><radio_player_div style="display: none; cursor: pointer; position: absolute; top: 7.5px; left: 67px; opacity: 1;" class="radio-control_volume_mute"><canvas style="width: 20px; height: 20px; position: absolute; top: 0px; left: 0px; opacity: 1;" width="20" height="20"></canvas></radio_player_div><radio_player_div style="display: block; cursor: pointer; position: absolute; top: 15.5px; left: 92px;" class="radio-control_volume_barline"><radio_player_div style="display: block; cursor: pointer; position: absolute; left: 0px; top: -10px; width: 40px; height: 24px; opacity: 0;"></radio_player_div><radio_player_div style="display: block; cursor: pointer; position: absolute; left: 0px; top: 0px; width: 40px; height: 4px; border-radius: 0px; opacity: 0.4; background-color: rgb(255, 255, 255);"></radio_player_div><radio_player_div style="display: block; cursor: pointer; position: absolute; left: 0px; top: 0px; height: 4px; border-radius: 0px; opacity: 1; background-color: rgb(255, 255, 255); width: 32px;"></radio_player_div></radio_player_div></radio_player_div></radio_player_div></radio_player_div></div>

<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="/js/bootstrap-rating.js"></script>
<script src="/js/select2.js"></script>
<script src="/js/jquery.nicescroll.js"></script>
<script src="/js/jquery.formstyler.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lazyload@2.0.0-rc.2/lazyload.js"></script>
<script src="/js/autosize.js"></script>



<script src="/js/jquery.emojis.js"></script>
<script src="/frontend/web/js/radio.js"></script> 

 <script>

function iOS() {
  //alert(navigator.userAgent);
  return [
    'iPad Simulator',
    'iPhone Simulator',
    'iPod Simulator',
    'iPad',
    'iPhone',
    'iPod'
  ].includes(navigator.platform)
  // iPad on iOS 13 detection
  || (navigator.userAgent.includes("Mac") && "ontouchend" in document);
  
}

 var is_safari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);

 var radio_cur  = new Radio({
       m:"audio",
       uid:"pcradio_c",
       //file:$('.hi-quality-selector').attr('data-quality'),
       volume:0.8
    });

var intPlayer;
var intSmallPlayer, intSmallSong;
var intSong, intPlay, intPulse;
var data_time;
var tmpbuffertitle ='';

var intComment;
var topSc = 10000000;

function time(){
  return parseInt(new Date().getTime()/1000)
}

function my_alert (text, action) {
  var th = $('.alert-block.' + action);
  th.find('span').text(text);
  th.fadeIn('slow');
  setTimeout( function() {
    th.fadeOut('slow');
  }, 2600); 
}

function get_cookie ( cookie_name ) {
  var results = document.cookie.match ( '(^|;) ?' + cookie_name + '=([^;]*)(;|$)' );
  if ( results )
    return ( unescape ( results[2] ) );
  else
    return null;
}

function show_login () {
      $.ajax({
        url: '/modal',
        data: { modal: '#loginBox' },
        type: 'post',
        success: function(ans) {   
           $('#loginBox').empty().append(ans);                   
           $('#loginBox').modal('show');
           $('.modal').on( 'shown.bs.modal', function() { 
            document.activeElement.blur(); 
            $('#loginBox input').val(''); 
          });
        }
      });
      $('.modal').off( 'hidden.bs.modal', show_login ); 
}

function show_remember () {
      $.ajax({
        url: '/modal',
        data: { modal: '#rememberBox' },
        type: 'post',
        success: function(ans) {   
           $('#rememberBox').empty().append(ans);                   
           $('#rememberBox').modal('show');
           $('.modal').on( 'shown.bs.modal', function() { 
            document.activeElement.blur(); 
            $('#rememberBox input').val(''); 
          });
        }
      }); 
      $('.modal').off( 'hidden.bs.modal', show_remember ); 
}

function show_sign_up () {
        $.ajax({
          url: '/modal',
          data: { modal: '#signupBox' },
          type: 'post',
          success: function(ans) {   
            $('#loginBox').empty().append(ans);                   
            $('#loginBox').modal('show');
            $('.modal').on( 'shown.bs.modal', function() { 
              document.activeElement.blur(); 
              $('#loginBox input').val(''); 
            });
          }
        }); 
        $('.modal').off( 'hidden.bs.modal', show_sign_up ); 
}

function getRandomInt(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min)) + min; //Максимум не включается, минимум включается
}

function header_cat_check () { 
    if ($(document).width() <= 767) {
      $('.more-filter-open').empty().append('<img alt="" src="/images/shevron-select-closed.png">Уточнить');
    } else {
      $('.more-filter-open').empty().append('<img alt="" src="/images/shevron-select-closed.png">Еще');
    }

      if ( $('.filter-selector-top').length == 0 ) return;
      if ( $(document).width() > 767 ) {
      
        var wrap = $('.filter-selector-top')[0].getBoundingClientRect();
        var el;
        var num = 0;
        var sum_width = 0;
        $('.filter-selector-top .cat-in-list').css('paddingLeft', '20px').css('paddingRight', '20px').css('marginRight', '10px');
        console.log(wrap);
        var yet = false;
        $('.filter-selector-top .cat-in-list').each(function(){
          el = $(this)[0].getBoundingClientRect();
          //console.log(el);
          var i = $(this).index();
          console.log(el, i, el.y > wrap.y);
          if ( el.y > wrap.y || yet ) {
            $('.filter-selector-top .cat-in-list').eq(i).hide();
            yet = true;
          } else {
            $('.filter-selector-top .cat-in-list').eq(i).show();
            num++;
            sum_width += el.width + 10;
          }
        });
        var delta = (wrap.width - sum_width)/(num*2);
        console.log(delta);
        $('.filter-selector-top .cat-in-list').each(function(){
          var i = $(this).index();
          $(this).css('paddingLeft', (delta+19)+'px').css('paddingRight', (delta+19)+'px');
          if (num - 1 == i) {
            $(this).css('marginRight', '0');
          }
          //$(this).closest('.cat-games-head').css('marginRight', (delta/2+10)+'px');
        });
      } else {
        $('.filter-selector-top .cat-in-list').hide();
      }
}

var audioCtx;
var source;
var marqueInt, marqueMobInt, marque = 0, marquemob = 0;
var analyser;

var load_css = true;

function goMarque () {
  /*
            clearInterval (marqueInt);

            marque = 0;
            $('.bottom-player .song-mobile-inner-inner').css('marginLeft', marque );

            if ( $('.bottom-player .song-mobile').width() < $('.bottom-player .song-mobile-inner-inner').width() ) {
              marqueInt = setInterval(
                function () {
                  if ( -marque >= $('.bottom-player .song-mobile-inner-inner').width() - $('.bottom-player .song-mobile').width() ) {
                    marqueK = 1;
                  }
                  if (marque >=0) {
                    marqueK = -1;
                  }
                  marque += marqueK;
                  $('.bottom-player .song-mobile-inner-inner').css('marginLeft', marque );
                }, 70
              )
            }
  */
  marque = 0;
  clearInterval (marqueInt);
  $('.song-title-inner').width(10000);
  
  var w = $('.song .song-artist').width();
  $('.song-title-wrapper').width(w);
  var W = $('.song').width();
  $('.song-title-inner').width(w*2+40);
  $('.bottom-player .song-title-inner').css('marginLeft', marque );

  if (w > W+1) {
              marqueInt = setInterval(
                function () {
                  if (marque < w + 20 - 1)
                    marque++;
                  else
                    marque = 0;
                  $('.bottom-player .song-title-inner').css('marginLeft', -marque + 'px' );
                }, 50
              )    
  }

  marquemob = 0;
  clearInterval (marqueMobInt);
  $('.song-mobile-inner').width(10000);
  
  var wm = $('.song-mobile-inner-inner').width();
  $('.song-mobile-wrapper').width(wm);
  var Wm = $('.song-mobile').width();
  $('.song-mobile-inner').width(wm*2+40);
  $('.song-mobile-inner').css('marginLeft', marque );

  if (wm > Wm+1) {
    marqueMobInt = setInterval(
                function () {
                  if (marquemob < wm + 20 - 1)
                    marquemob++;
                  else
                    marquemob = 0;
                  $('.song-mobile-inner').css('marginLeft', -marquemob + 'px' );
                }, 50
              )    
  }

            
}

function goPulse (cnnect) {


  //return;
  var player = $('audio')[0];
  var num_block = 64;

  if (!audioCtx) 
    audioCtx = new(window.AudioContext || window.webkitAudioContext);

  if (!audioCtx) return;
  
  if (cnnect) {
    source = audioCtx.createMediaElementSource(player);
    analyser = audioCtx.createAnalyser();
    analyser.fftSize = num_block*4;
    source.connect(analyser); // Подключаем анализатор к элементу audio
    analyser.connect(audioCtx.destination); // Без этой строки нет звука, но анализатор работает.
  } else {
    return;
  }
  var frequencyData = new Uint8Array(analyser.frequencyBinCount);
  var canvas = $('#canvas');
  clearInterval (intPulse);
  intPulse = setInterval(function() {
    analyser.getByteFrequencyData(frequencyData); // Записываем в массив данные уровней частот
    //console.log(frequencyData);
    canvas.empty();
    for (i = 0; i < 40; i++) {
      var h = frequencyData[i+10]/255*100;
      var l1 = 2.5 * i;
      var l2 = 0;
      canvas.append("<span style='height:"+h+"%;left:calc("+l1+"% + "+l2+"px)'></span>");
    }
  }, 50);
}


function get_small_track_info () {
  var deflogo = '/images/stations/cover-off.jpg';

      $.ajax({
        url: $('.bottom-player .quality-selector.med-quality-selector').attr('data-quality').
              replace('//stream', '//meta').replace('-med', '_current.json'),
        dataType: 'json',
        //headers: { 'Access-Control-Allow-Origin':'*', 'Access-Control-Allow-Headers':'*'},
        crossDomain: true,
        }).done(function(data){
          ans = data;
          var song;

          if (ans.artist != '')
            song = ans.artist + ' - ' + ans.title; 
          else
            song = ans.title;

          //console.log($('.bottom-player .song-artist').text().toLowerCase(),song.toLowerCase());

          if ($('.bottom-player .song-artist').eq(0).text().toLowerCase() != song.toLowerCase() ) {
            $('.bottom-player .song-artist').text(song.toLowerCase()); 
            goMarque ();

            $.ajax({
              url: 'https://itunes.apple.com/search',
              crossDomain: true,
              dataType: 'jsonp',
              data: {
                term: song,
                entity: 'song',
                limit: 1,
                explicit: 'No'
              },
              method: 'GET',
              success: function(data){
                if (data.results[0] !== undefined) {
                  var logo = data.results[0].artworkUrl100.replace('100x100','200x200');
                  $('.bottom-player .song-cover').attr('src', logo ? logo : deflogo);
                } else {
                  $('.bottom-player .song-cover').attr('src', deflogo);
                }
              },
              error: function(e){ 
                $('.bottom-player .song-cover').attr('src', deflogo);
              }
            }); 
          }
        });
}

function get_track_info() {

  var deflogo = '/images/stations/cover-off.jpg';

  $.ajax({
        url: $('.player-block .quality-selector.med-quality-selector').attr('data-quality').
              replace('//stream', '//meta').replace('-med', '_current.json'),
        dataType: 'json',
        //headers: { 'Access-Control-Allow-Origin':'*', 'Access-Control-Allow-Headers':'*'},
        crossDomain: true,
    }).done(function(data){
    
        //data = JSON.parse(data);
        //console.log(data);
        if ( data.title == '' && data.artist == '' ) {
            $('.station-block .track-ispoln').text('');
            $('.station-block .track-title').text('Прямой эфир');
            //$('#resultsеtitle').append('no signal');
            $('.track-logo').attr("src", deflogo);
        } else {
          var artist, title;
          if (data.artist != '') {
             artist = data.artist;
             title = data.title;
          } else {
            title = data.title.split(' - ');
            artist = title[0];
            title = typeof title[1] !== 'undefined' ? title[1]:'';
          }
          artist = artist.toLowerCase();
          title = title.toLowerCase();
          $('.station-block .track-title').empty().append(artist);
          $('.station-block .track-ispoln').empty().append(title);     
          
          var time = data.time.split(':');
          time = time[0]+':' + time[1];

            console.log('----', $('.history-list .history-item').eq(0).find('.history-song .n').text(), $('.station-block .track-ispoln').text());
            if ( $('.history-list .history-item').eq(0).find('.history-song .n').text().toLowerCase() != 
                 $('.station-block .track-ispoln').text().toLowerCase() ) {
                tmpbuffertitle = title;

                $.ajax({
            url: 'https://itunes.apple.com/search',
            crossDomain: true,
            dataType: 'jsonp',
            data: {
              term: artist + ' - ' + title,
              entity: 'song',
              limit: 1,
              explicit: 'No'
            },
            method: 'GET',
            success: function(data){
              console.log(data);
              if (data.results[0] !== undefined) {
                var logo = data.results[0].artworkUrl100.replace('100x100','200x200');
                $('.track-logo').attr("src", logo ? logo : deflogo);
                if ( $('.bottom-player .jp-play').attr('data-api_id') == $('.station_id').val() ) {  
                  $('.bottom-player .song-cover').attr('src', logo ? logo : deflogo);
                } 
              } else {
                $('.track-logo').attr('src', deflogo);
                if ( $('.bottom-player .jp-play').attr('data-api_id') == $('.station_id').val() ) {  
                  $('.bottom-player .song-cover').attr('src', deflogo);
                } 
              }
            },
            error: function(e){ 
              console.log(e);
              $('.track-logo').attr('src', deflogo);
              if ( $('.bottom-player .jp-play').attr('data-api_id') == $('.station_id').val() ) {  
                  $('.bottom-player .song-cover').attr('src', deflogo);
              } 
            }
          }); 

                $('.history-list').prepend("<div class='history-item'><span class='history-time'>"+time+
                                               "</span> <img alt='' class='history-dropdown-button' src='/images/icon-navigation-menu-vertical.png'> "+
'<span class="history-dropdown" style="display: none;">' +
'<a class="history-dropdown-item" data-hint="Видео в YouTube" href="https://www.youtube.com/results?search_query='+ artist+ '-' + title + '" target="_blank">' +
  '<img alt="" src="/images/black-tube-search.png">' +
'</a>' +
'<span class="history-copy history-dropdown-item" data-hint="Скопировать">' + 
  '<img alt="" src="/images/history-copy.png">' +
'</span>' +
'</span>' +

                                               "<span class='history-song'><span class='b'>" + artist+"</span> -  <span class='n'>" + title+"</span></div>");
                $('.history-list .history-item').eq(10).remove();

      if ( $('.bottom-player .jp-play').attr('data-api_id') == $('.station_id').val() ) {  
          
          $('.bottom-player .song-artist').empty().append(artist+ ' - '+ title); 
          goMarque ();
      }
            
            }
        }
        
    });

  }

function cards_cat_check() {
  $('.col-md-five .cat-list').each( function() {
    var delta = $(this).closest('.total-search-results').length ? 27 : 25;
    var cat_list = $(this).find('.cat-in-list');
    if (cat_list.length == 1) return;
    
    var el = cat_list[0].getBoundingClientRect();
    var w = $(this).width() - el.width - delta;
    if (w<50) {
      $(cat_list[1]).hide();
    } else {
      console.log('=====', $(this).width(), el.width, w);
      $(cat_list[1]).css('display', 'inline-block');
      $(cat_list[1]).css('maxWidth', w+'px');
    }      
  });
}

function load_page_scripts() {

  header_cat_check();
  cards_cat_check();
  genres_control_check();
  country_control_check();

  $('.main-page .category-loader').click(function() {
    $('.ajax-wrapper').load( '/?cat_id=' + $(this).attr('data-cat_id') + ' .ajax-inner', function() {
            $('.magic-column a img').each(function() {
               var th = $(this);
               setTimeout ( function() {
                 th.animate({'opacity':1}, getRandomInt(200, 400));
               }, getRandomInt(0, 500) );
            });
    });
  });


  $('.magic-column a img').each(function() {
               var th = $(this);
               setTimeout ( function() {
                 th.animate({'opacity':1}, getRandomInt(200, 400));
               }, getRandomInt(0, 500) );
  });


  topSc = $('.comments-list-wrapper').prop('scrollHeight');
  $('.comments-list-wrapper').scrollTop(topSc);

  //console.log('+++++',$('#radio-share').length);
  if ($('#radio-share').length) { 
    Ya.share2('radio-share', { content: {
        image: $('meta[property="og:image"]').attr('content'),
        url: $('meta[property="og:url"]').attr('content'),
        title: $('meta[property="og:title"]').attr('content'),
        description: $('meta[property="og:description"]').attr('content'),
    }}); 
  } 
/*
  if (is_safari) {
     $('.lazyload').each(function() {
       $(this).attr( 'data-src', $(this).attr('data-src').replace(/.webp/, '.jpg') );
     });
     $('.station-logo').each(function() {
       $(this).attr( 'src', $(this).attr('src').replace(/.webp/, '.jpg') );
     });
     $('.station-background').each(function() { 
       $(this).css( 'backgroundImage', $(this).css('backgroundImage').replace(/.webp/, '.jpg') );
     });  
     $('.stations-list-title-wrapper').each(function() {
       $(this).css( 'backgroundImage', $(this).css('backgroundImage').replace(/.webp/, '.jpg') );
     }); 
  }
*/
  if(iOS()) {
    $('.volume-bar').hide();
  }

  lazyload(); 
 
   if ( $('.station_id').val() != 0) {

    if (load_css) {
      $('head').prepend('<link rel="stylesheet" type="text/css" href="/css/jquery.emojipicker.css">');
      load_css = false;
    }

  console.log('------', $('.bottom-player .jp-stop').css('display') );
  if ($('.station_id').val() == $('.playing_id').val() && $('.bottom-player .jp-stop').css('display') !== 'none' ) {
    $('.jp-play').hide();
    $('.jp-stop').show();
    $('.jp-audio').addClass('jp-state-playing');
    $('audio').attr('crossorigin', "anonymous");
    goPulse(false);
  }

    
  $('.volume-bar').slider({
    range: "min",
    min: 0,
    max: 100,
    value: $('.volume').val(),
    animate: 'slow',
    slide: function( event, ui ) {
      radio_cur.Volume( ui.value / 100);

      $('.volume').val(ui.value);

      if (ui.value == 0) {
        $('.mute-button').addClass('mute'); 
        $('.bottom-mute-button').addClass('mute');
        $('.mute-button img').attr('src', '/images/volume-icon-off.png');
        $('.bottom-mute-button img').attr('src', '/images/volume-icon-off.png');
      } else {
        $('.mute-button').removeClass('mute');
        $('.bottom-mute-button').removeClass('mute');
        $('.mute-button img').attr('src', '/images/volume-icon.png');
        $('.bottom-mute-button img').attr('src', '/images/volume-icon.png');
      }

      $( '.volume-vert' ).slider( 'value', ui.value );
      $.ajax ({
        url:'/ajax',
        type:'post',
        data:{set_volume: ui.value}
      })  
    } 
  });



  if ( localStorage.getItem( '/' + $('.action_id').val() + '/' + $('.station_id').attr('data-alias') ) ) {
    //$('input.rating').attr('data-readonly', 'true')
  }

$('input.rating').rating();

$(document).on('change', 'input.rating', function(){
  var block = localStorage.getItem( '/' + $('.action_id').val() + '/' + $('.station_id').attr('data-alias') );
  if ( block - time() > 0 ) { // Math.ceil((block - time())/(3600*24))
    my_alert ('Оценивать можно не чаще 1 раза в 7 дней','fail');
    setTimeout (function(){
          var d1 = Math.trunc($('.rating-value.for-restore').text()*1);
          var d2 = $('.rating-value.for-restore').text()*1 - d1;
          $('.rating-symbol-foreground').css('width', '0%');
          $('.rating-symbol-background').css('visibility', 'visible');
          for (var i = 0; i < d1; i++ ) {
            $('.rating-symbol').eq(i).find('.rating-symbol-foreground').css('width', 'auto').css('left','0px');
          }
          if ( d2 != 0) {
            $('.rating-symbol').eq(d1).find('.rating-symbol-foreground').css('width', '14px').css('left','4px');
          }
        },1000)
    return;
  }
  var rating = $(this).val();
  $.ajax({
      url: '/ajax',
      data: { save_rating: rating, place: '/' + $('.action_id').val() + '/' + $('.station_id').attr('data-alias') },
      type: 'post',
      success: function(ans) {
        ans = ans.split('###');
        localStorage.setItem('/' + $('.action_id').val() + '/' + $('.station_id').attr('data-alias'), time() + 3600*24*7);
        //$('input.rating').attr('data-readonly', 'true').rating();
        $('.rating-votes-value').text(ans[0]);
        $('.rating-value').text(ans[1]);
        var votes = $('.rating-vots').text()*1 + 1;
        $('.rating-vots').text(votes).attr('titile', votes + ' votes');
        setTimeout (function(){
          var d1 = Math.trunc(ans[1]);
          var d2 = ans[1] - d1;
          $('.rating-symbol-foreground').css('width', '0%');
          $('.rating-symbol-background').css('visibility', 'visible');
          for (var i = 0; i < d1; i++ ) {
            $('.rating-symbol').eq(i).find('.rating-symbol-foreground').css('width', 'auto').css('left','0px');
          }
          if ( d2 != 0) {
            $('.rating-symbol').eq(d1).find('.rating-symbol-foreground').css('width', '14px').css('left','4px');
          }
        }, 1500)
      }      
  });    
});
      
console.log ( '=================', $('.action_id').val() );
/*
clearInterval (intComment);
intComment = setInterval (
  function() {
    //topSc = $('.comments-list-wrapper').scrollTop();
    $('.comments-list-wrapper').load( document.location.href + '?get_comment=1 .comments-list',
      function() {
        //$('.comments-list-wrapper').scrollTop(topSc);
      }  
    );        
  }, 60000
);
*/
/*
clearInterval (intSong);
intSong = setInterval (
     function() {
       var t1 = $('.song-time-bar').attr('data-duration')*1 - $('.song-time-bar').attr('data-time')*1 - 1;
       var t = $('.song-time-bar').attr('data-time')*1 + 1;
       t1 = Math.abs(t1);
       t = Math.abs(t);
       $('.song-time-bar').attr('data-time', t).text( (Math.floor(t1/60) <10 ? '0'+Math.floor(t1/60):Math.floor(t1/60)) + ':' + (t1%60 <10 ? '0'+t1%60:t1%60));
       var duration = $('.song-time-bar').attr('data-duration');
       var w = t/duration;
       //console.log($('.duration-bar').width());
       $('.track-block .playing-bar').css('width', w*100+'%');
      }, 1000
);
*/


clearInterval (intPlayer);
if ($('.station_id').val() != 0 ) {
  intPlayer = setInterval ( function() {
    //if ( $('.song-time-bar').attr('data-duration')*1 > 0 && new Date().valueOf()/1000 > $('.song-time-bar').attr('data-end')*1) {
    if ($('.station_id').val() != 0 ) {
        get_track_info();
    }
      //console.log('get_track_info');
    //}
  }, 10000);
}

 if ($('.station_id').val() == $('.playing_id').val()) {
/*
   $('.bottom-player .station-logo').attr('src', $('.station-block .station-logo').attr('src'));
   $('.bottom-player .station-title').text($('.station-block .station-title').text());
   $('.bottom-player .station-return').attr('href', document.location.href);
   $('.bottom-player .jp-play')
      .attr('data-api_id', $('.station_id').val())
      .attr('data-server', $('.station_id').attr('data-server'))
      .attr('data-alias', $('.station_id').attr('data-alias'))
      .attr('data-potok', $('.station-block .med-quality-selector').attr('data-quality'));
*/
   $('.bottom-player .song-artist').text( $('.station-block .track-ispoln').text() + ' - ' + $('.station-block .track-title').text() );
   //$('.bottom-player .song-title').text( );

   $('.bottom-player .song-cover').attr('src', $('.track-logo').attr('src') );
/*
   $('.bottom-player .low-quality-selector').attr('data-quality', $('.station-block .low-quality-selector').attr('data-quality'));
   $('.bottom-player .hi-quality-selector').attr('data-quality', $('.station-block .hi-quality-selector').attr('data-quality'));
   $('.bottom-player .med-quality-selector').attr('data-quality', $('.station-block .med-quality-selector').attr('data-quality'));
   
   if ( $('.favor-button').hasClass('add_favor_action') ) {
     $('.bottom-player .favor-add').removeClass('del_favor_action').addClass('add_favor_action');
     $('.bottom-player .favor-add').attr('src', '/images/favor1.png');
   } else {
     $('.bottom-player .favor-add').removeClass('add_favor_action').addClass('del_favor_action');
     $('.bottom-player .favor-add').attr('src', '/images/favor2.png');
   }
 */
   goMarque();

   clearInterval (intPlay);
   intPlay = setInterval (
     function() {
       ++data_time;
       if ( $('.station_id').val() == $('.playing_id').val() ) {
         //console.log(t, t/60, t%60);
         $('.play-time-bar').text( (Math.floor(data_time/60) <10 ? '0'+Math.floor(data_time/60):Math.floor(data_time/60)) + ':' + (data_time%60 <10 ? '0'+data_time%60:data_time%60));
       }
     }, 1000
   );

  }
  
} 
  
  var IS_TOUCH_DEVICE = ('ontouchstart' in document.documentElement);

  if (!IS_TOUCH_DEVICE /*  !navigator.userAgent.match(/(iPod|iPhone|iPad)/)  */ ) {
    //$('.filter-more-block').niceScroll({autohidemode: false, cursorborder: 'none', cursorwidth:9, cursorcolor:'rgb(223,223,223)'});
    //$('body').niceScroll({autohidemode: false, cursorborder: 'none', cursorwidth:9, cursorcolor:'rgb(223,223,223)'});
  }


  if ( $('.bottom-player .jp-stop').css('display') !== 'none' ) {
    $('.play-pause-button[data-station_id='+$('.playing_id').val()+']').removeClass('off').addClass('on');
  }
/*
  if ( $('.playing_id').val() != 0 && $('.playing_id').val() != $('.station_id').val() 
      || $('.bottom-player').is(':visible')
     ) {
*/
  clearInterval(intSmallPlayer);
  if ( $('.bottom-player').is(':visible') ) {
    $('.bottom-player').show();

    intSmallPlayer = setInterval ( function() {
      //if ( $('.bottom-player .playing-bar').attr('data-duration')*1 >0 && new Date().valueOf()/1000 > $('.bottom-player .playing-bar').attr('data-end')*1 ) {
        get_small_track_info();
        //console.log('get_small_track_info');
      //}
    }, 10000);
  
/*
    clearInterval (intSmallSong);
    intSmallSong = setInterval (
    function() {
       var t = $('.bottom-player .playing-bar').attr('data-time')*1 + 1;
       $('.bottom-player .playing-bar').attr('data-time', t);
       var duration = $('.bottom-player .playing-bar').attr('data-duration');
       var w = t/duration;
       //console.log($('.duration-bar').width());
       $('.bottom-player .playing-bar').css('width', w*100+'%');
      }, 1000
    );
*/
  } 

  $('.stsions-button').empty().append('<img alt="" class="menu-icon" src="/images/icon-stations.png">Станции');
  if ($('.new_stations').val() != 0) {
     $('.stsions-button').append("<div class='new-station-stiker'>+" + $('.new_stations').val() + "</div>");
     $('.new-stations-block-title').append("<div class='new-station-stiker'>+" + $('.new_stations').val() + "</div>");
  }

  autosize($('.send-area textarea'));
  //autosize($('.contact-area textarea'));

  $('.filter-select').select2({minimumResultsForSearch:Infinity, language: "ru", width:'315px'});
  $('.add-radio-form-select').select2({maximumSelectionLength: 2, language: "ru", width:'calc(33% - 10px)'});
  $('.mail-type-select').select2({minimumResultsForSearch: -1, language: "ru", width:'100%'});

  $('.add-radio-form-select').on('select2:open', function (e) {
    $('.select2-results__options').niceScroll({autohidemode: false, cursorborder: 'none', cursorwidth:9, cursorcolor:'rgb(223,223,223)'});
    setTimeout( function() { $('body').addClass('notscroll'); }, 100);
  });
  $('.add-radio-form-select').on('select2:close', function (e) {
    $('body').removeClass('notscroll');
  });

  $('.owner-check').styler();
  $('.delete-profile-input').styler();

  $('.stations-list').each(function(){
    if ( $(this).hasClass('wo-controls') ) return;
    if ($(this).find('.vertical-cards').length) {
      var nav_width = $(this).find('.vertical-cards').outerWidth(true) * $(this).find('.vertical-cards').length;
      $(this).find('.stations-list-inner').css('width', nav_width + 'px');
    } else {
      var nav_width = $(this).find('.col-md-five').outerWidth(true) * $(this).find('.col-md-five').length;
      $(this).find('.stations-list-inner').css('width', nav_width + 'px');
    }
  });

  if (!IS_TOUCH_DEVICE ) {
    $(".dropdown-list-inner").each(function() {
      //$(this).niceScroll({autohidemode: true, cursorborder: 'none', cursorwidth:0, cursorcolor:'#fff'});
    });
  }



  if ( $('.app-images-wrapper').length) { 
  setTimeout ( function() {
    var width=0, ncatbut=0;
    $('.app-images-wrapper .appscreen').each(function(){
      width += $(this).outerWidth() + 20;
      console.log('wwww', $(this).outerWidth(), width);
      ++ncatbut;
      if (ncatbut == $('.app-images-wrapper .appscreen').length ) {
        if (!IS_TOUCH_DEVICE ) {
          $('.app-images-inner').width(width);
          $(".app-images-wrapper").niceScroll({autohidemode: true, cursorborder: 'none', cursorwidth:0, cursorcolor:'#fff'});
        }
      }
    });
  }, 500);
  } else {
    $('.nicescroll-rails').remove();
  }

  $('#overflow').hide();
  $('.ajax-big-loader').hide();

}

function load_page (href, h_push) {

  $('#overflow').show();
  $('.ajax-big-loader').show();
      
      $.ajax({
        url: href,
        data: { autoplay: $('.playing_id').attr('data-alias') != '' ? $('.playing_id').attr('data-alias') : $('.bottom-player .jp-play').attr('data-alias') },
        type: 'post',
        success: function(ans) {  

          if (h_push) {
            history.pushState(null, null, href);
          }


          var div = document.createElement('div');
          div.innerHTML = ans;
          var elem = div.querySelector('#body-inner');
          $('#body-inner').empty().append(elem.innerHTML)

          console.log(href);

          $('body').removeClass();

          if (href == '/radiostations') $('body').addClass('allstations-page-body');
          if (href == '/contact') $('body').addClass('contact-page-body');
          if ( href.indexOf('/privacy_policy') !== -1 ) $('body').addClass('privacy-page-body');
          if (href == '/') $('body').addClass('main-page-body');
          if (href.indexOf('/zhanr/') != -1 ) $('body').addClass('genre-page-body');
          if (href.indexOf('/search') != -1 ) $('body').addClass('search-page-body');
          if (href.indexOf('/add_radio') != -1 ||
              href.indexOf('/edit-radio') != -1 ||
              href.indexOf('/mail.html') != -1 
            ) $('body').addClass('add-radio-page-body');
          

          //var $ans = $(ans);
          //$('body').empty().append( $ans.find('#body-inner') );

          $('.station_id').val(div.querySelector('.station_id').value);
          document.title = div.querySelector('title').innerHTML;
          $('meta[name=description]').attr('content', div.querySelector('meta[name=description]').content);
          
          $('meta[property="og:title"]').attr('content', div.querySelector('meta[property="og:title"]').content);
          $('meta[property="og:description"]').attr('content', div.querySelector('meta[property="og:description"]').content);
          $('meta[property="og:type"]').attr('content', div.querySelector('meta[property="og:type"]').content);
          if (div.querySelector('meta[property="og:image"]'))
            $('meta[property="og:image"]').attr('content', div.querySelector('meta[property="og:image"]').content);
          $('meta[property="og:url"]').attr('content', div.querySelector('meta[property="og:url"]').content);
          $('html').scrollTop(0);
          load_page_scripts();
        }
      }) 
      //$('form#loadpage').attr('action',$(this).attr('href')).submit();
      return false;

}

function genres_control_check () {
  var elem = $('.dropdown-genres-list .dropdown-list-inner')[0];
  var vis = $('.dropdown-genres-list').is(':visible');
  if (!vis) {
    $('.dropdown-genres-list').show();
  }
  if ( elem.clientHeight < elem.scrollHeight - 100 ) {
    $('.dropdown-genres-list  .dropdown-control-block').show();
  } else {
    $('.dropdown-genres-list  .dropdown-control-block').hide();
  }
  if (!vis) {
    $('.dropdown-genres-list').hide();
  }
}

function country_control_check () {
  var elem = $('.dropdown-country-list .dropdown-list-inner')[0];
  var vis = $('.dropdown-country-list').is(':visible');
  if (!vis) {
    $('.dropdown-country-list').show();
  }
  if ( elem.clientHeight < elem.scrollHeight ) {
    $('.dropdown-country-list  .dropdown-control-block').show();
  } else {
    $('.dropdown-country-list  .dropdown-control-block').hide();
  }
  if (!vis) {
    $('.dropdown-country-list').hide();
  }
}

$(function(){

  $(window).resize(function() {
    goMarque();
    header_cat_check();
    cards_cat_check();
    genres_control_check();
    country_control_check();
  });

  $(document).on('click', 'a', function() {
    $('.emojiPicker').hide();
    if ($(this).hasClass('genres-list-button')) return;
    if ($(this).hasClass('comment-text')) return;
    if ($(this).hasClass('country-list-button')) return;
    if ($(this).hasClass('apps-list-button')) return;
    if ($(this).hasClass('total-search')) return;
    if ($(this).hasClass('search-button')) return;
    if ($(this).hasClass('similar-station-button')) return;
    if ($(this).closest('.comments-list .pagination').length != 0 && !$(this).parent().hasClass('active')) return false;
    if ($(this).hasClass('goto-comments')) {
      $([document.documentElement, document.body]).animate({
        scrollTop: $("#comments").offset().top
      }, 500);      
      return false;
    }
    if ($(this).hasClass('user')) return false;
    if ($(this).attr('target') == '_blank') return;

    if ( $('.playing_id').val() != 0 || $('.bottom-player').is(':visible')) { 
      if ($(this).parent().hasClass('ajax-load-more')) {
        $(this).parent().click();
        return false;
      } else {
        load_page ( $(this).attr('href'), true );
        return false;
      } 
    }

  });

  window.addEventListener("popstate", function(e) {
	  load_page ( document.location.pathname, false );
    return false;
	});

  $(document).on('click', '.quality-block', function() {
    $(this).next().toggle();
    $(this).find('.quality-caret-down').toggleClass('open');
  });

  $(document).on('click', '.comments-list .pagination a', function() {
    if ($(this).parent().hasClass('active')) return;
    $('#overflow').show();
    $('.ajax-big-loader').show();
    $('.comments-list-wrapper').load( $(this).attr('href') + '?get_comment=1 .comments-list', function(){
      $([document.documentElement, document.body]).animate({
        scrollTop: $("#comments").offset().top
      }, 500);
      $('#overflow').hide();
      $('.ajax-big-loader').hide();
    });  
  })

$(document).on('click', '.quality-drop-down .quality-selector', function() {
/*
  var active = $(this).hasClass('active');
  if ($(this).hasClass('active') && $(this).closest('.bottom-player').length == 0 && document.body.clientWidth > 768 ) return;

  $('.quality-selector.active').addClass('wasactive');
  $('.quality-selector').addClass('active');
  $('.quality-selector.wasactive').removeClass('wasactive').removeClass('active');  

  if ( !active ) {
    $(this).addClass('active');
  } 
*/
    $.ajax ({
        url:'/ajax',
        type:'post',
        data:{set_quality: $(this).attr('data-set-quality')}
    })  
  $('.quality').val($(this).attr('data-set-quality'));
  $('.quality-drop-down .quality-selector').removeClass('selected');
  $(this).addClass('selected');
  $('.quality-drop-down .quality-selector .quality-selected').each(function(){
    $(this).attr('src', $(this).attr('data-src')+'black.png');
  })
  $(this).find('.quality-selected').attr('src', $(this).find('.quality-selected').attr('data-src')+'blue.png');
  $('.quality-block .quality-selector').attr('data-quality', $(this).attr('data-quality'));
  $('.quality-block .quality-selector').text($(this).attr('data-text'));
  $('.quality-block .icon-live-notice').attr('src', $(this).find('.quality-selected').attr('data-src')+'blue.png');
  
  if ( $('.playing_id').val() != 0 && $('.bottom-player .jp-stop').is(':visible') ) {
    radio_cur.Play($('.bottom-player .quality-selector.active').attr('data-quality'));
    $('audio').attr('crossorigin', "anonymous");
    goPulse(true);
  }
});

$(document).on('click', '.mute-button, .bottom-mute-button', function() {
  
  if ($(this).hasClass('mute')) {
    if ($('.volume').val() == 0) {
      $('.volume').val(80);
    }
    $('.mute-button').removeClass('mute');
    $('.bottom-mute-button').removeClass('mute');
    if ($('.bottom-player').is(':visible')) {
      if ( iOS() ) {
        radio_cur.Play($('.bottom-player .quality-selector.active').attr('data-quality'));
      } else {
        radio_cur.Volume($('.volume').val()/100);
      }
    }
    $('.mute-button img').attr('src', '/images/volume-icon.png');
    $('.bottom-mute-button img').attr('src', '/images/volume-icon.png');

    $('.volume-bar' ).slider( 'value', $('.volume').val() );
    $('.volume-vert' ).slider( 'value', $('.volume').val() );
    $.ajax ({
        url:'/ajax',
        type:'post',
        data:{set_volume: $('.volume').val()}
    })  

  } else {
    
    $('.mute-button').addClass('mute');
    $('.bottom-mute-button').addClass('mute');
    $('.volume-bar' ).slider( 'value', 0 );
    $('.volume-vert' ).slider( 'value', 0 );
    if ($('.bottom-player').is(':visible')) {
        if ( iOS() )
          radio_cur.Stop();
        else
          radio_cur.Volume(0);
    }
    $('.mute-button img').attr('src', '/images/volume-icon-off.png');
    $('.bottom-mute-button img').attr('src', '/images/volume-icon-off.png');
    $.ajax ({
        url:'/ajax',
        type:'post',
        data:{set_volume: 0}
    })  
  }

});

$(document).on('click', '.jp-play', function() {
 if ($(this).closest('.bottom-player').length == 0 ) {
   //console.log($('.quality-selector.active').attr('data-quality'));
   radio_cur.Play($('.player-block .quality-selector.active').attr('data-quality'));
   $('.jp-audio').addClass('jp-state-playing'); 

   $('audio').attr('crossorigin', "anonymous");

   goPulse(true);
 
   clearInterval (intPlay);
   data_time = 0;
   intPlay = setInterval (
     function() {
       ++data_time;
       if ( $('.station_id').val() == $('.playing_id').val() ) {
         //console.log(t, t/60, t%60);
         $('.play-time-bar').text( (Math.floor(data_time/60) <10 ? '0'+Math.floor(data_time/60):Math.floor(data_time/60)) + ':' + (data_time%60 <10 ? '0'+data_time%60:data_time%60));
       }
     }, 1000
   );
 
   $('.playing_id').val($('.station_id').val()).attr('data-alias', $('.station_id').attr('data-alias'));

   $('.bottom-player .station-logo').attr('src', $('.station-header .station-logo').attr('src'));
   $('.bottom-player .song-title').text($('.station-header .station-title').attr('data-title'));
   $('.bottom-player .station-return').attr('href', document.location.href);
   $('.bottom-player .jp-play')
      .attr('data-api_id', $('.station_id').val())
      .attr('data-server', $('.station_id').attr('data-server'))
      .attr('data-alias', $('.station_id').attr('data-alias'))
      .attr('data-potok', $('.station-block .med-quality-selector').attr('data-quality'));

   $('.bottom-player .song-artist').text( $('.station-block .track-title').text() + ' - ' +  $('.station-block .track-ispoln').text());
   //$('.bottom-player .song-title').text( );

   $('.bottom-player .song-cover').attr('src', $('.track-logo').attr('src') );

   $('.bottom-player .low-quality-selector').attr('data-quality', $('.station-block .low-quality-selector').attr('data-quality'));
   $('.bottom-player .hi-quality-selector').attr('data-quality', $('.station-block .hi-quality-selector').attr('data-quality'));
   $('.bottom-player .med-quality-selector').attr('data-quality', $('.station-block .med-quality-selector').attr('data-quality'));
   
   if ( $('.station-data .favor-button').hasClass('add_favor_action') ) {
     $('.bottom-player .favor-add').removeClass('del_favor_action').addClass('add_favor_action');
     $('.bottom-player .favor-add').attr('src', '/images/favor1.png');
   } else {
     $('.bottom-player .favor-add').removeClass('add_favor_action').addClass('del_favor_action');
     $('.bottom-player .favor-add').attr('src', '/images/favor2.png');
   }

   $('.bottom-player').show();

   goMarque ();

   $('.jp-stop').show();
   $('.jp-play').hide(); 

   $('.play-pause-button').removeClass('on').addClass('off');
 } else {
   $('.bottom-player .jp-stop').show();
   $('.bottom-player .jp-play').hide();  
   radio_cur.Play($(this).attr('data-potok')); 
   if ($('.station_id').val() == $(this).attr('data-api_id') ) {
     $('.jp-audio').addClass('jp-state-playing');
     $('.jp-audio .jp-stop').show();
     $('.jp-audio .jp-play').hide(); 
     
     $('audio').attr('crossorigin', "anonymous");
     goPulse(true);
     clearInterval (intPlay);
     data_time = 0;
     intPlay = setInterval (
       function() {
         ++data_time;
         if ( $('.station_id').val() == $('.playing_id').val() ) {
           //console.log(t, t/60, t%60);
           $('.play-time-bar').text( (Math.floor(data_time/60) <10 ? '0'+Math.floor(data_time/60):Math.floor(data_time/60)) + ':' + (data_time%60 <10 ? '0'+data_time%60:data_time%60));
         }
       }, 1000
     );
   } 
   $('.play-pause-button[data-station_id='+$(this).attr('data-api_id')+']').removeClass('off').addClass('on');
   $('.playing_id')
     .val($(this).attr('data-api_id'))
     .attr('data-server', $(this).attr('data-server'))
     .attr('data-alias', $(this).attr('data-alias'));
 }

  var listen = get_cookie('listen');
  if (listen)
    listen = listen.split(',');
  else 
    listen = [];
  if ( listen.indexOf($('.playing_id').val()) == -1 )
    listen.push($('.playing_id').val());
  listen = listen.join(',');
  document.cookie = "listen="+listen+"; path=/; expires=01/01/2030 00:00:00"; 
});

$(document).on('click', '.jp-stop, .play-pause-button.on', function() {
   radio_cur.Stop();
   clearInterval (intPulse);
   $('#canvas').empty();
   $('.jp-audio').removeClass('jp-state-playing');
   $('.playing_id').val(0).attr('data-alias', '');
   clearInterval(intPlay);
   $('.play-time-bar').text('00:00');
   data_time = 0;
   $('.jp-stop').hide();
   $('.jp-play').show();

   $('.play-pause-button').removeClass('on').addClass('off');
});

$(document).on('click', '.play-pause-button.off', function() {
   //console.log($('.quality-selector.active').attr('data-quality'));
   radio_cur.Play($(this).attr('data-'+$('.quality').val()));
   $('.jp-audio').addClass('jp-state-playing'); 

   $('audio').attr('crossorigin', "anonymous");

   goPulse(true);
 
   $('.playing_id').val($(this).attr('data-station_id')).attr('data-alias', $(this).attr('data-alias'));

  var listen = get_cookie('listen');
  if (listen)
    listen = listen.split(',');
  else 
    listen = [];
  if ( listen.indexOf($('.playing_id').val()) == -1 )
    listen.push($('.playing_id').val());
  listen = listen.join(',');
  document.cookie = "listen="+listen+"; path=/; expires=01/01/2030 00:00:00"; 

   var card = $(this).closest('.col-md-five').find('.station-in-list-small');

   $('.bottom-player .station-logo').attr('src', card.find('.station-in-list-logo').attr('data-src'));
   $('.bottom-player .song-title').text(card.find('.station-in-list-title').text());
   $('.bottom-player .station-return').attr('href', card.attr('href'));
   $('.bottom-player .jp-play')
      .attr('data-api_id', $(this).attr('data-station_id'))
      .attr('data-alias', $(this).attr('data-alias'))
      .attr('data-potok', $(this).attr('data-med'));

   $('.bottom-player .song-artist').text( '' );
   //$('.bottom-player .song-title').text( '' );

   $('.bottom-player .favor-add').attr('data-station_id', $(this).attr('data-station_id'));

   $('.bottom-player .song-cover').attr('src', '/images/stations/cover-off.jpg' );

   $('.bottom-player .low-quality-selector').attr('data-quality', $(this).attr('data-low'));
   $('.bottom-player .hi-quality-selector').attr('data-quality', $(this).attr('data-hi'));
   $('.bottom-player .med-quality-selector').attr('data-quality', $(this).attr('data-med'));

   var izbr = $(this).closest('.col-md-five').find('.favor-button').hasClass('del_favor_action');

   if (izbr) {
    $('.bottom-player .favor-add').removeClass('add_favor_action').addClass('del_favor_action').attr('src', '/images/favor2.png');
   } else {
    $('.bottom-player .favor-add').removeClass('del_favor_action').addClass('add_favor_action').attr('src', '/images/favor1.png');
   }

   $('.bottom-player').show();

   goMarque ();

   $('.bottom-player .jp-stop').show();
   $('.bottom-player .jp-play').hide(); 

   $('.play-pause-button').removeClass('on').addClass('off');
   $(this).removeClass('off').addClass('on');
   
   data_time = 0;
   load_page ('/radio/'+$(this).attr('data-alias'), true);
});


$(document).click(function(e){
    console.log(e.target.className); 

    if ( e.target.className !=  'comment-dropdown-menu-button')
      $( '.comment-dropdown-menu-list').hide();
    if ( e.target.className != 'navbar-toggle' && 
         e.target.className != 'total-search-input' &&
         $(e.target).closest('#w0-collapse').length == 0 &&
         $(e.target).closest('.select2').length == 0 &&
         //$(e.target).closest('.dropdown-country-list').length == 0 &&
         !$(e.target).hasClass('dropdown-control-block') &&
         $(e.target).closest('.dropdown-control-block').length == 0 &&
         e.target.className.indexOf('country-sort-item') == -1 &&
         e.target.className != 'country-search'
       ) {
      $( '#w0-collapse').removeClass('in').attr('aria-expanded', false);
      $('.country-list-button').addClass('close-countries').removeClass('open-countries');
      $('.dropdown-country-list').hide();
      $('body').removeClass('notscroll');
    }
    if ( e.target.className != 'navbar-toggle' && 
         e.target.className != 'total-search-input' &&
         $(e.target).closest('#w0-collapse').length == 0 &&
         $(e.target).closest('.select2').length == 0 &&
         //$(e.target).closest('.dropdown-country-list').length == 0 &&
         !$(e.target).hasClass('dropdown-control-block') &&
         $(e.target).closest('.dropdown-control-block').length == 0 &&
         e.target.className.indexOf('genre-sort-item') == -1 &&
         e.target.className != 'genre-search' 
       ) {
      $( '#w0-collapse').removeClass('in').attr('aria-expanded', false);
      $('.genres-list-button').addClass('close-genres').removeClass('open-genres');
      $('.dropdown-genres-list').hide();
      $('body').removeClass('notscroll');
    }
    if ( e.target.className != 'login-user-block' && e.target.className != 'login-user-img')
       $('.login-user-block').hide();

    if ( e.target.className != 'info-button' && $(e.target).closest('.info-drop-block').length == 0)
       $('.info-drop-block').hide();
    
    if ( !$(e.target).hasClass('active') && $(e.target).closest('.active').length == 0)
       $('.mobile-pagination-wrapper').removeClass('open');

    if ( $(e.target).closest('.history-item').length == 0 && e.target.className != 'history-item') {
       $('.history-dropdown').hide();
       $('.history-item').removeClass('open-menu');
    }

    var $e = $(e.target);
    //console.log ($e);
    if( !$e.hasClass('rating-block-button') && $e.closest('.rating-block-button').length == 0 ) {
      $('.rating-block').removeClass('mobile-show');
    }
    if( !$e.hasClass('soc-share-mobile') && $e.closest('.soc-share-mobile').length == 0 ) {
      $('.soc-share').addClass('mobile-hidden');
    }
    if( !$e.hasClass('volume-vert-wrapper') && $e.closest('.volume-vert-wrapper').length == 0 ) {
      $('.volume-vert-wrapper').hide();
    }

    if ( !$e.hasClass('more-filter-open') && !$e.parent().hasClass('more-filter-open') && !$e.hasClass('filter-more-block') && $e.closest('.filter-more-block').length == 0 ) {
      $('.filter-more-block').hide();
      $('.more-filter-open').removeClass('open');
    }
    if( !$e.hasClass('quality-block') && $e.closest('.quality-block').length == 0 ) {
      $('.quality-drop-down').hide();
      $('.quality-caret-down').removeClass('open');
    }
 /*      
    if ( e.target.className != 'total-search-img' && 
         e.target.className != 'dropdown-search-window' &&
         e.target.className != 'station-image-img' &&
         e.target.className != 'total-search-input' &&
         e.target.className != 'station-in-search' &&
         e.target.className != 'station-name'  
       ) {
      $('.dropdown-search-window').hide();
      $('body').removeClass('notscroll');
    }
*/
    if ($('.emojiPicker').is(":visible")  ) {
        if ( event.target.parentNode.className != 'smile-button' && event.target.className.indexOf('emoji') == -1 && !(event.target.parentNode.className == 'emojiPicker' || event.target.parentNode.parentNode.className == 'emojiPicker' || event.target.parentNode.parentNode.parentNode.className == 'emojiPicker')) {
          $('.emojiPicker').hide();
        }
    }
    if ($('.soc-share-opener').is(":visible") && 
        e.target.className != 'soc-share-opener' && 
        e.target.parentNode.className != 'soc-share-opener' 
       ) {
      $('.soc-share').hide();
    }
  });

  $(document).on('click', '.seach-window-close', function() {
    $('.dropdown-search-window').hide();
    $('body').removeClass('notscroll');
  })


  $(document).on('click', '.search-button', function() {
    $('.dropdown-genres-list').hide();
    $('.dropdown-country-list').hide();
    $('#w0-collapse').removeClass('in').attr('aria-expanded','false');
    $('.navbar-toggle').attr('aria-expanded', 'false');
    $('.dropdown-search-window').show();
    $('body').addClass('notscroll');
    return false;
  });

  $(document).on('click', '.finger-up-button', function() {
      var th = $(this);
      var t = th.closest('.comment-info').find('span');
      $.ajax({
        url: '/ajax',
        data: { finger_up: th.attr('data-comment_id') },
        type: 'post',
        success: function(ans) {  
          if (ans.length > 5) {
           t.text(t.text()*1+1);
           if (t.text()*1 >= 0 ) { t.removeClass('finger-down').addClass('finger-up'); }
           else { t.removeClass('finger-up').addClass('finger-down'); }
          }
        }
      });     
  });
  $(document).on('click', '.finger-down-button', function() {
      var th = $(this);
      var t = th.closest('.comment-info').find('span');
      $.ajax({
        url: '/ajax',
        data: { finger_down: th.attr('data-comment_id') },
        type: 'post',
        success: function(ans) {   
          if (ans.length > 5) {
           t.text(t.text()*1-1);
           if (t.text()*1 >= 0 ) { t.removeClass('finger-down').addClass('finger-up'); }
           else { t.removeClass('finger-up').addClass('finger-down'); }
          }
        }
      });     
  });

  $(document).on('click', '.appscreen img, .bigappscreen img', function(){
    $('#screenshotBox').modal('hide');
    $('#screenshotBox .modal-body img').attr('src', '/images/app/large/' + $(this).attr('data-src').replace('.png','.jpg'));
    $('#screenshotBox').modal('show');
  });

  $(document).on('click', '.apps-list-button', function(){
    $('.apps-list-item').toggleClass('hidden-item');
    $(this).toggleClass('open-apps');
    return false;
  });

  
    $(document).on('click', '.no-login-user', function(){
      $('.modal').modal('hide');
      //my_alert ('Авторизация и регистрация временнно закрыты по техническим причинам', 'fail');
      show_login();
      return false;
    });

    $(document).on('click', '.login-user', function(){
      $.ajax({
        url: '/logout',
        data: { },
        type: 'post',
        success: function(ans) {
          setTimeout ( function() {
               load_page(document.location.href, false);
          }, 300);
        }
      }); 
      return false;
    });

    $(document).on('click', '.go-to-login', function(){
      $('.modal').modal('hide');
      $('.modal').on( 'hidden.bs.modal', show_login); 
      return false;
    });

    $(document).on('click', '.go-to-registr', function(){
      $('.modal').modal('hide');
      $('.modal').on( 'hidden.bs.modal', show_sign_up);
      return false;
    });

    $(document).on('click', '.go-to-remember', function(){
      $('.modal').modal('hide');
      $('.modal').on( 'hidden.bs.modal', show_remember);
      return false;
    });


  $(document).on('change', '.required, .logo-link.error', function(){
    if ($(this).hasClass('owner-check')) return;
    if ($(this).val()=='') {
       $(this).addClass('error').attr('placeholder', 'Заполните поле');
     } else {
       $(this).removeClass('error').attr('placeholder', '');
       $('.save-station-order').removeClass('error');
       $('.send-support').removeClass('error');
     }
  });

  $(document).on('blur', '.required, .logo-link.error', function(){
    if ($(this).hasClass('owner-check')) return;
    if ($(this).val()=='') {
       $(this).addClass('error').attr('placeholder', 'Заполните поле');
     } else {
       $(this).removeClass('error').attr('placeholder', '');
       $('.save-station-order').removeClass('error');
       $('.send-support').removeClass('error');
     }
  });

  $(document).on('focus', '.required, .logo-link.error', function(){
    if ($(this).hasClass('owner-check')) return;
    $(this).removeClass('error').attr('placeholder', '');
    $('.save-station-order').removeClass('error');
    $('.send-support').removeClass('error');
  });


    $(document).on('submit', '#login-form', function() {
     var able = true;
     if ($('#loginBox #loginform-email').val()=='') {
       able = false;
       $('#loginBox #loginform-email').parent().find('.form-control').addClass('error').attr('placeholder', 'Заполните поле');
     }
     
     if ($('#loginBox #loginform-password').val()=='') {  
       able = false;
       $('#loginBox #loginform-password').parent().find('.form-control').addClass('error').attr('placeholder', 'Заполните поле');
     }
     
     if (!able) {
       return false
     }


     var data = $(this).serialize();
     
     $.ajax({
       url: '/ajax',
       data: data,
       type: 'post',
       success: function(ans) {
         $('#loginBox .required').parent().find('.form-error').text('').hide();
         $('#loginBox .required').removeClass('error');
         if (ans.length < 20 ) {
             $('.modal').modal('hide');
             setTimeout ( function() {
               load_page(document.location.href, false);
             }, 300);
         } else {
           ans = ans.split('#');
           $('#loginBox #' + ans[1]).parent().find('.form-control').val('').addClass('error').attr('placeholder', ans[0]);
         }
       }
    });  

    return false;
  });

  $(document).on('submit', '#remember-form', function() {
     var able = true;
     if ($('#rememberBox #loginform-email').val()=='') {
       able = false;
       $('#rememberBox #loginform-email').parent().find('.form-control').addClass('error').attr('placeholder', 'Заполните поле');
     }
     
     if (!able) {
       return false
     }

     var data = $(this).serialize();
     
     $.ajax({
       url: '/ajax',
       data: data,
       type: 'post',
       success: function(ans) {
         if ( ans.indexOf('Email отправлен') != -1 ) {
           $('.modal').modal('hide');
           $('.modal').on( 'hidden.bs.modal', show_login); 
           ans = ans.split('#');
           my_alert(ans[0], ans[1]); 
         } else {
          if ( ans.indexOf('не найден на сайте') != -1 ) {
            $('#rememberBox #loginform-email').parent().find('.form-control').val('').addClass('error').attr('placeholder', ans);
          } else {
            ans = ans.split('#');
            my_alert(ans[0], ans[1]);           
          }
         }
       }
    });  

    return false;
  });

    $(document).on('submit', '#signup-form', function() {
     var able = true;
     if ($('#signup-form #loginform-email').val()=='') {
       able = false;
       $('#signup-form #loginform-email').parent().find('.form-control').addClass('error').attr('placeholder', 'Заполните поле');
     }

     if ($('#signup-form #loginform-username').val()=='') {
       able = false;
       $('#signup-form #loginform-username').parent().find('.form-control').addClass('error').attr('placeholder', 'Заполните поле');
     }
     
     if ($('#signup-form #loginform-password').val()=='') {  
       able = false;
       $('#signup-form #loginform-password').parent().find('.form-control').addClass('error').attr('placeholder', 'Заполните поле');
     }

     if ($('#signup-form #loginform-password-2').val()=='') {  
       able = false;
       $('#signup-form #loginform-password-2').parent().find('.form-control').addClass('error').attr('placeholder', 'Заполните поле');
     }
     
     if (!able) {
       return false
     }
     
     if ($('#signup-form #loginform-password').val()!=$('#signup-form #loginform-password-2').val()) {  
       able = false;
       $('#signup-form #loginform-password-2').parent().find('.form-control').val('').addClass('error').attr('placeholder', 'Пароли не совпадают');
     }

     if (!able) {
       return false
     }

     var data = $(this).serialize();
     
     $.ajax({
       url: '/ajax',
       data: data,
       type: 'post',
       success: function(ans) {
         if (ans.length < 5 ) {
           $('.modal').modal('hide');
           setTimeout ( function() {
               load_page(document.location.href, false);
             }, 300);
         } else {
           ans = ans.split('#');
           my_alert(ans[0], ans[1]);
         }
       }
    });  
      
    return false;
  });

  $(document).on ('click', '.genres-list-button', function() {
    $('#w0-collapse').removeClass('in').attr('aria-expanded','false');
    $('.navbar-toggle').attr('aria-expanded', 'false');
    $('.dropdown-country-list').hide();
    $(this).toggleClass('close-genres').addClass('open-genres');
    $('.dropdown-genres-list').show();
    setTimeout (function() {
      $('body').addClass('notscroll');
    }, 200 );
    return false;
  });

  $(document).on ('click', '.country-list-button', function() {
    $('#w0-collapse').removeClass('in').attr('aria-expanded','false');
    $('.navbar-toggle').attr('aria-expanded', 'false');
    $('.dropdown-genres-list').hide();
    $(this).toggleClass('close-countries').addClass('open-countries');
    $('.dropdown-country-list').show();
    setTimeout (function() {
      $('body').addClass('notscroll');
    }, 200 );
    return false;
  });

  $('.volume-vert').slider({
    range: "min",
    min: 0,
    max: 100,
    orientation: 'vertical',
    value: $('.volume').val(),
    animate: 'slow',
    slide: function( event, ui ) {
      if (ui.value == 0) {
        $('.mute-button').addClass('mute'); 
        $('.bottom-mute-button').addClass('mute');
        $('.mute-button img').attr('src', '/images/volume-icon-off.png');
        $('.bottom-mute-button img').attr('src', '/images/volume-icon-off.png');
      } else {
        $('.mute-button').removeClass('mute');
        $('.bottom-mute-button').removeClass('mute');
        $('.mute-button img').attr('src', '/images/volume-icon.png');
        $('.bottom-mute-button img').attr('src', '/images/volume-icon.png');
      }

      radio_cur.Volume( ui.value / 100);
      $('.volume').val(ui.value);
      $('.volume-bar' ).slider( 'value', ui.value );
      $.ajax ({
        url:'/ajax',
        type:'post',
        data:{set_volume: ui.value}
      })  
    }
  });

  $('.volume-button').mouseover(function() {
    $('.volume-vert-wrapper').show();
  });
  $('.volume-button').mouseleave(function() {
    $('.volume-vert-wrapper').hide();
  });

  $('.icon-close-alert').click(function() {
    $(this).closest('.alert-block, .privacy-block').hide();
    if ($(this).hasClass('privacy-close')) {
      localStorage.setItem('prvc', 'yes');
    }
  });

  if (!localStorage.getItem('prvc')) {
    $('.privacy-block').show();
  }


    $(document).on('click', '.user.login-user', function(){
      $('.login-user-block').show();
    });


  $(document).on('click', '.del_favor_action', function() {

    var sid = $(this).attr('data-station_id');

if ( $('.user_id').val() != 0 ) {

$.ajax({
 url: '/ajax',
 data: {del_favor:sid},
 type: 'post'
});

} else { 
  
      var izbr = get_cookie('izbr' );
      izbr = izbr.split(',');
      var idx = izbr.indexOf(sid);
      //console.log(izbr);
      if (idx != -1) izbr.splice(idx, 1);
      //console.log(idx, izbr);
      izbr = izbr.join(',');
      //console.log("izbr="+izbr+"; expires=01/01/2030 00:00:00");
      let date = new Date(Date.now() + 365*86400*1000);
      date = date.toUTCString();
      console.log (date); 
      document.cookie = "izbr="+izbr+"; path=/; expires="+date;
}
  /*    
      $(this).addClass('add_favor_action').removeClass('del_favor_action')
      var th = $(this);
      if (!th.hasClass('favor-add')) th = th.find('.favor-add');    
      th.attr('src', '/images/favor1.png');
      
      var cnt_span = $(this).find('.favor-count span');
      cnt_span.text(cnt_span.text()*1 - 1);   
  */
    $('.favor-button[data-station_id='+sid+']').addClass('add_favor_action').removeClass('del_favor_action').attr('data-title', 'В избранное');
    $('.favor-add[data-station_id='+sid+']').addClass('add_favor_action').removeClass('del_favor_action').closest('.favor-button-wrapper').attr('data-title', 'В избранное');
    $('.favor-button[data-station_id='+sid+'] .favor-add').attr('src', '/images/favor1.png');
    $('.favor-add[data-station_id='+sid+']').attr('src', '/images/favor1.png');
    $('.favor-button[data-station_id='+sid+'] .favor-count span').text( $('.favor-button[data-station_id='+sid+'] .favor-count span').text()*1-1 );
    if ($('.action_id').val() == 'favorites') {
      var url = document.location.href;

      $('.station-list-ajax-wrapper').load( url + ' .station-list-ajax', function() {
        var cnt = $('.station-list-ajax .col-md-five').length;
        $('.stationlist-count').text(cnt);
        if (cnt == 0) {
          $('.search-block').hide();
          $('.filter-selector').hide();
          $('.more-filter-open').hide();
        }
        lazyload();
        header_cat_check();
        cards_cat_check();
        history.pushState(null, null, url);
      });

    }
  });

  
  $(document).on('click', '.app-images-right-block', function() {
    var ofs = $('.app-images-wrapper').scrollLeft();
    console.log(ofs);
    var cnt = $('.app-images-wrapper .appscreen').length;
    var W = cnt*146;
    var w = $('.app-images-wrapper').width();
    var max_ofs = W - w;
    
    ofs = Math.min (ofs + 146, max_ofs)
    $('.app-images-wrapper').animate({scrollLeft: ofs}, 'slow');
  });

  $(document).on('click', '.app-images-left-block', function() {
    var ofs = $('.app-images-wrapper').scrollLeft();
    console.log(ofs);
    
    ofs = Math.max (ofs - 146, 0)
    $('.app-images-wrapper').animate({scrollLeft: ofs}, 'slow');
  });


  $(document).on('click', '.dropdown-bottom-block', function() {
    var ofs = $(this).closest('.dropdown-mainmenu-list').find('.dropdown-list-inner').scrollTop();
    var W = $(this).closest('.dropdown-mainmenu-list').find('.dropdown-list-inner')[0].scrollHeight;
    var w = $(this).closest('.dropdown-mainmenu-list').find('.dropdown-list-inner')[0].clientHeight;
    var max_ofs = W - w;
    
    ofs = Math.min (ofs + 190, max_ofs)
    $('.dropdown-list-inner').animate({scrollTop: ofs}, 'slow');
  });

  $(document).on('click', '.dropdown-top-block', function() {
    var ofs = $(this).closest('.dropdown-mainmenu-list').find('.dropdown-list-inner').scrollTop();
    ofs = Math.max (ofs - 190, 0)
    $('.dropdown-list-inner').animate({scrollTop: ofs}, 'slow');
  });
  
  
  $(document).on('click', '.add_favor_action', function() {

    var sid = $(this).attr('data-station_id');

    if ($('.user_id').val() != 0) {

      $.ajax({
       url: '/ajax',
       data: {add_favor:sid},
       type: 'post'
      });

    } else { 
  
      var izbr = get_cookie('izbr' );
      //console.log(izbr);
      if (izbr)
        izbr = izbr.split(',');
      else 
        izbr = [];
      
      if ( izbr.indexOf(sid) == -1 )
        izbr.push(sid);
      izbr = izbr.join(',');
      document.cookie = "izbr="+izbr+"; path=/; expires=01/01/2030 00:00:00"; 
    
    } 
    
    /*
    $(this).addClass('del_favor_action').removeClass('add_favor_action');
    var th = $(this);
    if (!th.hasClass('favor-add')) th = th.find('.favor-add');    
    th.attr('src', '/images/favor2.png');

    var cnt_span = $(this).find('.favor-count span');
    cnt_span.text(cnt_span.text()*1 + 1);
    */

    $('.favor-button[data-station_id='+sid+']').addClass('del_favor_action').removeClass('add_favor_action').attr('data-title', 'Убрать из избранного');
    $('.favor-add[data-station_id='+sid+']').addClass('del_favor_action').removeClass('add_favor_action').closest('.favor-button-wrapper').attr('data-title', 'Убрать из избранного');
    $('.favor-button[data-station_id='+sid+'] .favor-add').attr('src', '/images/favor2.png');
    $('.favor-add[data-station_id='+sid+']').attr('src', '/images/favor2.png');
    $('.favor-button[data-station_id='+sid+'] .favor-count span').text( $('.favor-button[data-station_id='+sid+'] .favor-count span').text()*1+1 );
  });

  $(document).on('focus', '.send-area textarea, .total-search-input, .search-input', function() {
    /*
    if ($(this).hasClass('not-auth')) {
      show_login();
      return false;
    } 
    */
    $(this).attr('data-ps', $(this).attr('placeholder'));
    $(this).attr('placeholder','');
  });
  $('.send-area textarea, .total-search-input, .search-input').blur(function() {
    $(this).attr('placeholder', $(this).attr('data-ps'));
  });

  $(document).on('keyup', '.send-area textarea', function() {
    
    var l = $(this).val().length;
    if ( l > 200 ) {
      $(this).val($(this).val().substr(0, 200));
      l = 200;
      //autosize($('.send-area textarea'));
    }
    $('.symbol-count').text(l);
    if (l>0) {
      $('.send-button').addClass('active');
      $('.send-button img').attr('src', '/images/send-comment.png');
    }
    else {
      $('.send-button').removeClass('active');
      $('.send-button img').attr('src', '/images/send-comment-gray.png');
    }
  });

  $(document).on('click', '.load-doc-button', function(){
    setTimeout(function() {
      $('.save-doc-button').css('display','inline-block');
    }, 500);
  })

  $(document).on('click', '.save-doc-button', function(){
    $('.station-doc-input').click();
  })

  $(document).on('change', '.station-doc-input', function(){
    var file = $(this).prop('files')[0];

    if( typeof file == 'undefined' ) return;
  
    var form_data = new FormData();
    //form_data.append('MAX_FILE_SIZE', 10000000);
	  form_data.append('document', file);
 
	  $.ajax({
      url: '/ajax',
      dataType: 'text',
      cache: false,
      contentType: false,
      processData: false,
      data: form_data,
      type: 'post',
      success: function(ans){
        $('.doc-load-error').hide();
        $('.doc-load-result').show();
        $('.station-doc').val(ans);
      },
      error: function( jqXHR, status, errorThrown ){
			  alert( 'ОШИБКА загрузки: ' + status, jqXHR );
		  }
    });
  })

  $(document).on('click', '.jq-radio.owner-check', function(){
    //alert($(this).hasClass('checked'));
    $('.jq-radio.owner-check').removeClass('error');
    $('.save-station-order').removeClass('error');
    $('.send-support').removeClass('error');
  });

  $(document).on('change', 'input.owner-check', function(){
    if (!$(this).hasClass('required'))
      $('.doc-toggle').toggle();
  });

  $(document).on('change', '#station-order-form select', function(){
    $(this).next().removeClass('error');
    $('.save-station-order').removeClass('error');
    $('.send-support').removeClass('error');
  });

  $(document).on('change', '.country-select', function() {
    $.ajax({
      url: '/ajax',
      data: {load_cities: $(this).val()},
      type: 'post',
      success: function(a) {
        $('select.city-select').removeAttr('disabled').empty().append(a).val('').trigger('change');
      }
    });
  })

  $(document).on('click', '.selected-genres .selected-genre', function() {
    $(this).remove();
  })

  $(document).on('change', 'select.genres-select', function(){
    if ($(this).val() == '') return;
    var genre = $(this).find('option:selected').text();
    var val = $(this).val();
    var need = true;
    $('.selected-genres .selected-genre').each(function () {
      //console.log('-=-=-=-', $(this).attr('data-genre'), val);
      if ($(this).attr('data-genre') == val) {
        need = false;
      }
    });
    if (need) {
      $('.selected-genres').append("<div class='selected-genre' data-genre='"+val+"'>"+genre+" <img alt='' src='/images/icon-delete-filter.png'></div>");
    }
    $(this).val('').trigger('change');
  })

  function validateEmail(email) {
  var pattern  = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return pattern.test(email);
  }

  $(document).on('click', '.save-station-order', function(){
    var able = true;

    $('.required').each(function() {
      if ($(this).hasClass('owner-check')) return;
      if ($(this).val()=='') {
       able = false;
       $(this).parent().find('.form-control').addClass('error').attr('placeholder', 'Заполните поле');
      }      
    })

    $('.valid-email').each(function(){
      if ( $(this).val() !='' && !validateEmail($(this).val()) ) {
        able = false;
        $(this).parent().find('.form-control').addClass('error');
      }
    })

    $('select.country-select, select.city-select').each(function() {
      //console.log('=========', $(this).val());
      if ($(this).val()=='' || $(this).val() === null) {
        able = false;
        $(this).next().addClass('error');
      }      
    })

    if ( $('.selected-genres .selected-genre').length == 0 ) {
      able = false;
      $('select.genres-select').next().addClass('error');
    } 

    if ( $('.jq-radio.owner-check').hasClass('required') && ! $('.jq-radio.owner-check').hasClass('checked') ) {
      able = false;
      //alert('!!!');
      $('.jq-radio.owner-check').addClass('error')
    }

    if ( $('.doc-toggle').length && $('.doc-toggle').is(':visible') && ! $('.doc-load-result').is(':visible') ) {
      able = false;
      $('.doc-load-error').show();
    }

    if ( $('.logo-link').val() == ''  && $('.station-logo').val() == '' ) {
      able = false;
      $('.logo-link').addClass('error').attr('placeholder', 'Загрузите фото или введите ссылку');
    }
     
     if (!able) {
       $('.save-station-order').addClass('error');
       return false
     }

    if ($('.change-list').length) {
      $('.change-in-list').each(function () {
         if(!$(this).hasClass('active')) {
           var field = $(this).attr('data-field');
           $('.'+field).val('');
         }
      })
    }

     var data = $('#station-order-form').serialize();

     //console.log (data); return false;

     if (!$('.change-list').length || $('.change-in-list[data-field=genres-select]').hasClass('active') ) {

       var cats = [];

       $('.selected-genres .selected-genre').each(function() {
         cats.push($(this).attr('data-genre'));
       })

       data = data + '&cats=' + cats.join(',');
     }
     
     $.ajax({
       url: '/ajax',
       data: data,
       type: 'post',
       success: function(ans) {
        setTimeout(function() {
          load_page('/add_radio?success');
        }, 300);
         //my_alert('Ваша заявкк отправлена')ж
       }
    });  

    return false;
  })

  $(document).on('click', '.send-support', function(){
    
    if ($(this).hasClass('notactive')) return;

    var th = $(this);
    var able = true;

    $('.required').each(function() {
      if ($(this).val()=='') {
       able = false;
       $(this).parent().find('.form-control').addClass('error').attr('placeholder', 'Заполните поле');
      }      
    })
     
     if (!able) {
       $('.send-support').addClass('error');
       return false
     }

     $(this).addClass('notactive');

     var data = $('#send-support-form').serialize();

     //console.log (data); return false;
       var images = [];

       $('.loaded-files .loaded-file').each(function() {
        images.push($(this).attr('data-file'));
       })

       data = data + '&images=' + images.join(',');
     
     $.ajax({
       url: '/ajax',
       data: data,
       type: 'post',
       success: function(ans) {
         //load_page('/mail.html?success');
         my_alert('Вашe обращение отправлено', 'success');
         $('select.mail-type-select').val('');
         $('select.mail-type-select').select2({minimumResultsForSearch: -1, language: "ru", width:'100%'});
         $('.ajax-form-inner').empty();
         th.removeClass('notactive')
       }
    });  

    return false;
  })

  $(document).on('click', '.info-button', function() {
    $('.info-drop-block').hide();
    $(this).next().show();
  })

  $(document).on('click', '.pagination-wrapper > .pagination > .active', function() {

    $('.mobile-pagination-wrapper').addClass('open');
  })

  $(document).on('click', '.info-drop-block-close', function() {
    $('.info-drop-block').hide();
  })

  $(document).on('click', '.load-screenshots-button', function(){
    $('.screenshots-input').click();
  })

  $(document).on('click', '.station-logo-button', function(){
    $('.station-logo-input').click();
  })

  $(document).on('change', '.screenshots-input', function(){
    var files = $(this).prop('files');

    if( files.length == 0 ) return;

    if (files.length + $('.loaded-file').length > 3) {
      my_alert ('Не более трех изображений', 'fail' );
      return;
    }

    for (var i=0; i<files.length; i++) {

    var file = files[i];
    var form_data = new FormData();
    //form_data.append('MAX_FILE_SIZE', 10000000);
	  form_data.append('screenshot', file);
 
	  $.ajax({
      url: '/ajax',
      dataType: 'text',
      cache: false,
      contentType: false,
      processData: false,
      data: form_data,
      type: 'post',
      success: function(ans){
        ans = ans.split('###');
        $('.loaded-files').append("<div class='loaded-file' data-file='"+ans[1]+"'>" + ans[0] + " <img alt='' src='/images/icon-delete-filter.png'></div>");
        /*var lfs = $('.screenshots').val();
        lfs = lfs.split(',');
        lfs.push(ans[1]);
        lfs = lfs.join(',');
        $('.screenshots').val(lfs);
        */
      },
      error: function( jqXHR, status, errorThrown ){
			  my_alert( 'ОШИБКА загрузки: ' + status, jqXHR, 'fail' );
		  }
    });
    }
  })

  $(document).on('click', '.loaded-file', function(){
    $(this).remove();
  })

  $(document).on('change', '.station-logo-input', function(){
    var file = $(this).prop('files')[0];

    if( typeof file == 'undefined' ) return;
  
    var form_data = new FormData();
    //form_data.append('MAX_FILE_SIZE', 10000000);
	  form_data.append('logo', file);
 
	  $.ajax({
      url: '/ajax',
      dataType: 'text',
      cache: false,
      contentType: false,
      processData: false,
      data: form_data,
      type: 'post',
      success: function(ans){
        $('.station-logo-result').attr('src', '/images/stations/'+ans);
        $('.station-logo').val(ans);
        $('.logo-link').removeClass('error').attr('placeholder', '');
        $('.save-station-order').removeClass('error');
        $('.send-support').removeClass('error');
      },
      error: function( jqXHR, status, errorThrown ){
			  alert( 'ОШИБКА загрузки: ' + status, jqXHR );
		  }
    });
  })

  $(document).on('keyup', '.station-description', function() {
    var left = 1500 - $(this).val().length;
    $('.symbol-counter span').text(left);
  })

  $(document).on('change', '.logo-link', function(){
    if ( $(this).val() != '' ) {
      $.ajax({
      url: '/ajax',
      data: {load_link:$(this).val()},
      type: 'post',
      success: function(ans){
        if (ans.length > 5) {
          $('.station-logo-result').attr('src', '/images/stations/'+ans);
          $('.station-logo').val(ans);
          $('.logo-link').removeClass('error').attr('placeholder', '');
          $('.save-station-order').removeClass('error');
          $('.send-support').removeClass('error');
        } else {
          $('.station-logo-result').attr('src', '/images/add-ststion-default-logo.png');
          $('.station-logo').val('');
          $('.logo-link').addClass('error').attr('placeholder', 'Изображение не найдено');
        }
      },
      error: function( jqXHR, status, errorThrown ){
			  $('.station-logo-result').attr('src', '/images/add-ststion-default-logo.png');
        $('.station-logo').val('');
        $('.logo-link').addClass('error').attr('placeholder', 'Ошибка загрузки');
		  }
    });
    } else {
        $('.station-logo-result').attr('src', '/images/add-ststion-default-logo.png');
        $('.station-logo').val('');
        $('.logo-link').removeClass('error').attr('placeholder', '');
        $('.save-station-order').removeClass('error');
        $('.send-support').removeClass('error');
		}
  })

  function set_filter () {
    var genres = [], countries = [];

    $('.filter-more-block .cat-in-list.active').each(function() {
       if ($(this).attr('data-filter-type') == 'genres') {
         genres.push($(this).attr('data-filter-id'));
       } else {
        countries.push($(this).attr('data-filter-id'));
       }
     })

     genres = genres.join(',');
     countries = countries.join(',');
     
     return ( genres != '' ? '&genres=' + genres : '' ) + ( countries != '' ? '&countries=' + countries : '' );
  }


  $(document).on('click', '.ordering-button', function() {
   
    if ( $(this).hasClass('active') ) return;

    var order = $(this).attr('data-order');
    var filter = $('.filter-select').length && $('.filter-select').val() != 0 ? '&filter=' + $('.filter-select').val() : '';

    var search = $('.search-input').val() != '' ? '&search='+encodeURI($('.search-input').val()) : '';
    var filter = set_filter();
     
    $('.ordering-button').removeClass('active');
    $(this).addClass('active');
    
    var url = document.location.href.split('?')[0]+'?order='+order+filter+search;

    $('.station-list-ajax-wrapper').load( url + ' .station-list-ajax', function() {
      lazyload();
      header_cat_check();
      cards_cat_check(); 
      history.pushState(null, null, url);
    });

  });
/*
  $(document).on('change', '.filter-select', function(){
     
   var order = $('.ordering-button.active').attr('data-order');
   var filter = $(this).val() != 0 ?  '&filter=' + $('.filter-select').val() : '';

   var url = document.location.href.split('?')[0]+'?order='+order+filter;

   $('.station-list-ajax-wrapper').load( url +' .station-list-ajax', function() {
      lazyload();
      history.pushState(null, null, url);
    });

 });
*/
   var search_keyup_timer;
   $(document).on('keyup', '.search-input', function() {

    var th = $(this);
    clearTimeout(search_keyup_timer);
    search_keyup_timer = setTimeout( function() {

      $('#overflow').show();
     $('.ajax-big-loader').show();
     var search = th.val() != '' ? '&search='+encodeURI($('.search-input').val()) : '';

     var order = $('.ordering-button.active').attr('data-order');
     var filter = set_filter();

     var url = document.location.href.split('?')[0]+'?order='+order+filter+search;

     $('#overflow').show();
     $('.ajax-big-loader').show();

     var input = document.querySelector('.search-input');
     var startPosition = input.selectionStart;
     var endPosition = input.selectionEnd;
     

     $('.station-list-ajax-wrapper').load( url +' .station-list-ajax', function() {
        lazyload();
        history.pushState(null, null, url);
        header_cat_check();
        cards_cat_check();
        
        var input = document.querySelector('.search-input');
        if (input) {
          input.focus();
          input.selectionStart = startPosition;
          input.selectionEnd = endPosition;
        }

        $('#overflow').hide();
        $('.ajax-big-loader').hide();
     });
    }, 1000);
   })


   $(document).on('click', '.filter-selector .cat-in-list, .active-filter', function(){

     var type = $(this).attr('data-filter-type');
     var id = $(this).attr('data-filter-id');
     
     if ($('.action_id').val() == 'index') {
      $('.filter-selector .cat-in-list').removeClass('active');
      $('.filter-selector .cat-in-list[data-filter-type='+type+'][data-filter-id='+id+']').addClass('active')
      $('.genres-list.filter-selector.filter-selector-top .cat-in-list[data-filter-type='+type+'][data-filter-id='+id+']').prependTo('.genres-list.filter-selector.filter-selector-top');
      $('.filter-selector .cat-in-list[data-filter-type='+type+'][data-filter-id=0]').prependTo('.genres-list.filter-selector.filter-selector-top');
     } else {
       $('.filter-selector .cat-in-list[data-filter-type='+type+'][data-filter-id='+id+']').toggleClass('active');
     }

     var order = $('.ordering-button.active').attr('data-order');
     var search = $('.search-input').length && $('.search-input').val() != '' ? '&search='+encodeURI($('.search-input').val()) : '';
     var filter = set_filter();

     var url = order ? document.location.href.split('?')[0]+'?order='+order+filter+search:
                       document.location.href.split('?')[0]+'?'+filter.replace('&', '')+search;
  
     $('.station-list-ajax-wrapper').load( url +' .station-list-ajax', function() {
        lazyload();
        header_cat_check();
        cards_cat_check();
        history.pushState(null, null, url);
      });

   });

 $(document).on('click', '.more-filter-open', function() {
   $('.filter-more-block').toggle();
   $(this).toggleClass('open');
   return false;
 })

 $(document).on('click', '.filter-more-block-closer', function() {
  $('.filter-more-block').hide();
  $('.more-filter-open').removeClass('open');
 })


 $(document).on('click', '.country-sort-item', function() {
   $('.country-sort-item').removeClass('active');
   $(this).addClass('active');
   if ($(this).attr('data-sort') == 'popular') {
     $('.dropdown-country-list .genge-link').sort(function (a, b) {
       return parseInt($(a).attr('data-pop'), 10) < parseInt($(b).attr('data-pop'), 10) ? -1: 1;
     }).appendTo('.dropdown-country-list .dropdown-list-inner');
   } else if ($(this).attr('data-sort') == 'alpha') {
    $('.dropdown-country-list .genge-link').sort(function (a, b) {
       return $(a).text() < $(b).text() ? -1: 1;
     }).appendTo('.dropdown-country-list .dropdown-list-inner');
   }
 })

 $(document).on('click', '.genre-sort-item', function() {
   $('.genre-sort-item').removeClass('active');
   $(this).addClass('active');
   if ($(this).attr('data-sort') == 'popular') {
     $('.dropdown-genres-list .genge-link').sort(function (a, b) {
       return parseInt($(a).attr('data-pop'), 10) < parseInt($(b).attr('data-pop'), 10) ? -1: 1;
     }).appendTo('.dropdown-genres-list .dropdown-list-inner');
   } else if ($(this).attr('data-sort') == 'alpha') {
    $('.dropdown-genres-list .genge-link').sort(function (a, b) {
       return $(a).text() < $(b).text() ? -1: 1;
     }).appendTo('.dropdown-genres-list .dropdown-list-inner');
   }
 })

 var search_keyup_timer1;

 $(document).on('keyup', '.country-search', function() {
   var search = $(this).val().toLowerCase();
   var th = $(this);

   clearTimeout(search_keyup_timer1);
   search_keyup_timer1 = setTimeout( function() {
    if (search == '') {
      $('.dropdown-country-list .genge-link').show();
    } else {
      $('.dropdown-country-list .genge-link').each(function(){
        if ($(this).text().toLowerCase().indexOf(search) != -1) {
          $(this).show();
        } else {
          $(this).hide();
        }
      });
    }
    country_control_check ();
   }, 500);
 })

 $(document).on('keyup', '.genre-search', function() {
   var search = $(this).val().toLowerCase();
   var th = $(this);

   clearTimeout(search_keyup_timer1);
   search_keyup_timer1 = setTimeout( function() {
    if (search == '') {
      $('.dropdown-genres-list .genge-link').show();
    } else {
      $('.dropdown-genres-list .genge-link').each(function(){
        if ($(this).text().toLowerCase().indexOf(search) != -1) {
          $(this).show();
        } else {
          $(this).hide();
        }
      });
    }
    genres_control_check ();
   }, 500);
 })

 $(document).on('keyup', '.total-search-input', function() {

    var search = $(this).val();
    var th = $(this);
    
    if(event.keyCode==13) {
      if ( search != '' )
        load_page ('/radiostations?search='+encodeURIComponent(search), true);
    }

    clearTimeout(search_keyup_timer1);
    search_keyup_timer1 = setTimeout( function() {

    if (th.val() == '') {
      $('.total-search-results').empty();
    } else {
      $('#overflow').show();
      $('.ajax-big-loader').show();
      $.ajax({
        url: '/ajax',
        data: { total_search: th.val() },
        type: 'post',
        success: function(ans) {   
          $('.total-search-results').empty().append(ans);
          $('.total-search-results').niceScroll({autohidemode: false, cursorborder: 'none', cursorwidth:9, cursorcolor:'rgb(223,223,223)'});
          cards_cat_check();
          lazyload();
          $('body').addClass('notscroll');
          $('#overflow').hide();
          $('.ajax-big-loader').hide();
        }
      });      
    }
    }, 1000);
  });


  $(document).on('keyup', '.search_station_name', function() {

var search = $(this).val();
var th = $(this);

clearTimeout(search_keyup_timer1);
search_keyup_timer1 = setTimeout( function() {

if (th.val() == '') {
  $('.dropdown-search-list').empty().text('Ничего не найдено');
} else {
  $('#overflow').show();
  $('.ajax-big-loader').show();
  $.ajax({
    url: '/ajax',
    data: { order_search: th.val() },
    type: 'post',
    success: function(ans) {   
      $('.dropdown-search-list').empty().append(ans);
      $('.dropdown-search-list').show();
      $('#overflow').hide();
      $('.ajax-big-loader').hide();
    }
  });      
}
},700);
});

$(document).on('click', '.dropdown-search-list .mini-station-in-list', function() {
  $('.dropdown-search-list').hide();
  $('.search_station_name').parent().remove();
  var card = $(this).clone();
  $('.change-list').prepend(card).show();
  $('.ajax-form-wrapper').load('/edit-radio?order=' + $(this).attr('data-station-id') + ' .ajax-form-inner', function(){
    $('.add-radio-form-select').select2({maximumSelectionLength: 2, language: "ru", width:'33%'});
  })
})

var mint;
$(document).on('mouseover', '.history-song', function(el) {
  var tth = $(this)[0];
  if ( tth.scrollWidth > tth.offsetWidth ) {
  var i = 0;
  var th = $(this).find('.b');
  clearInterval(mint);
  mint = setInterval( function() { 
    ++i;
    th.css('marginLeft', -i+'px');
  }, 70);
  }
})

$(document).on('mouseout', '.history-song', function() {
  clearInterval(mint);
  $(this).find('.b').css('marginLeft', '0px');
})

$(document).on('change', '.mail-type-select', function(){
  $('.ajax-form-inner').empty();
  $('.ajax-form-wrapper').load('/mail.html?type=' + $(this).val() + ' .ajax-form-inner', function(){
    $('.form-item').show();
  })  
})

$(document).on('click', '.change-in-list', function() {
  $(this).toggleClass('active');
  var field = $(this).attr('data-field');
  if (field == 'station-logo-input') {
    $('.load-logo-block').toggle();
  } else if ( field == 'genres-select' || field == 'country-select' || field == 'city-select') {
    var b = $('select.'+field).next();
    if (b.is(':visible')) {
      b.hide();
    } else {
      b.css('display', 'inline-block');
    }
    if (field == 'genres-select') {
      $('.selected-genres').toggle();
    }
    if (field == 'country-select' && $(this).hasClass('active')) {
      if (!$('.change-in-list[data-field=city-select]').hasClass('active')) {
        $('.change-in-list[data-field=city-select]').click();
      }
    }
    if ($('.change-in-list.selbuttons.active').length > 0) {
      $('.select-block').show();
    } else {
      $('.select-block').hide();
    }
  } else {
    $('.'+field).closest('.form-item').toggle();
    
    if ($(this).hasClass('active') && field == 'station-site') {
      $('.'+field).addClass ('required');
    } else {
      $('.'+field).removeClass ('required');
    }
  }

  if ( $('.change-in-list.active').length > 0 ) {
    $('.document-block').show();
  } else {
    $('.document-block').hide();
  }
})

$('.need-cover').each(function(){
    var th = $(this);
    if (th.attr('data-cover') != ' - ') {
            $.ajax({
              url: 'https://itunes.apple.com/search',
              crossDomain: true,
              dataType: 'jsonp',
              data: {
                term: th.attr('data-cover'),
                entity: 'song',
                limit: 1,
                explicit: 'No'
              },
              method: 'GET',
              success: function(data){
                if (data.results[0] !== undefined) {
                  var logo = data.results[0].artworkUrl100.replace('100x100','200x200');
                  th.attr('src', logo ? logo : '');
                } 
              }
            }); 
    } 
  }) 


  $(document).on('click', '.load-avatar', function(){
    $('.load-avatar-input').click();
  });

  $(document).on('click', '.delete-avatar', function(){
    $.ajax({
        url: '/ajax',
        data: { delete_avatar: 1 },
        type: 'post',
        success: function(ans) {   
          $('.user-settings-avatar').attr('src', '/images/users/default-profile-1.png');
          $('.header-dropdown-menu .avatar img').attr('src', '/images/users/default-profile-1.png');
          $('.right-part-header .login-user-img').attr('src', '/images/nouser.png');
          $('.load-avatar').text('Загрузить фото');
          $('.delete-avatar').hide();
        }
      });
  });

  $(document).on('change', '.load-avatar-input', function(){
    var file = $(this).prop('files')[0];

    if( typeof file == 'undefined' ) return;
  
    var form_data = new FormData();
    //form_data.append('MAX_FILE_SIZE', 10000000);
	  form_data.append('avatar', file);
 
	  $.ajax({
      url: '/ajax',
      dataType: 'text',
      cache: false,
      contentType: false,
      processData: false,
      data: form_data,
      type: 'post',
      success: function(ans){
        $('.user-settings-avatar').attr('src', '/images/users/'+ans);
        $('.header-dropdown-menu .avatar img').attr('src', '/images/users/'+ans);
        $('.right-part-header .login-user-img').attr('src', '/images/users/'+ans);
        $('.load-avatar').text('Обновить фото');
        $('.delete-avatar').show();
      },
      error: function( jqXHR, status, errorThrown ){
			  alert( 'ОШИБКА загрузки: ' + status, jqXHR );
		  }
    });
  });


  $(document).on('click', '.save-profile', function(){

      if ( $('.emeil-settings').val() == '' || $('.username-settings').val() == '' ) {
        my_alert ('Введите значение', 'fail');
        return;
      }
  
      $.ajax({
        url: '/ajax',
        data: { save_profile: $('.emeil-settings').val(), username: $('.username-settings').val() },
        type: 'post',
        success: function(ans) {   
          if (ans.length > 5) {
            ans = ans.split('#');
            my_alert (ans[0], ans[1]);
          } else {
            my_alert ('Профиль сохранен', 'success');
          }
        }
      });

  });

  $(document).on('click', '.send-email', function(){
    if ( $('.emeil-settings').val() == '' || $('.name-settings').val() == '' ||  $('textarea.form-control').val() == '' ) {
        my_alert ('Введите значение', 'fail');
        return;
    }
    
    if(! $('.emeil-settings')[0].checkValidity() ) {
      my_alert ('Введите корректный email', 'fail');
        return;
    }

    $.ajax({
      url: '/ajax',
      data: { send_email: $('.emeil-settings').val(), username: $('.name-settings').val(), message: $('textarea.form-control').val()},
      type: 'post',
      success: function(ans) {  
        my_alert ('Email отправлен', 'success');
        $('textarea').val('');
      }
    });
  });

  
  $(document).on('click', '.delete-profile-confirm', function(){
    $.ajax({
      url: '/ajax',
      data: { delete_profile: $('.current-password').val() },
      type: 'post',
      success: function(ans) {
        if (ans.length > 5) {
          ans = ans.split('#');
          my_alert (ans[0],ans[1]);
        } else {
          load_page(document.location.href, false);
          my_alert('Профиль успешно удален', 'success');
        }
        $('#deleteprofileBox').modal('hide');
      }
    });
  });

  $(document).on('click', '.reply a.comment-text', function(){
    $.ajax({
      url: '/modal',
      data: { modal: '#dialogBox', comment_id: $(this).attr('data-comment_id') },
      type: 'post',
      success: function(ans) {
        $('#dialogBox').empty().append(ans);
        $('#dialogBox').modal('show');
      }
    });
    return false;
  });


  $(document).on('click', '.save-setting', function(){

    if ( $('.old-password-settings').val() == '' ) {
      my_alert ('Введите значение текущего пароля', 'fail');
      return;
    }

    if ($('.jq-checkbox.delete-profile-input').hasClass('checked')) {
      $('.current-password').val($('.old-password-settings').val());  
      $('#deleteprofileBox').modal('show');
      return;
    }
  
  if ( $('.new-password-settings').val() != '') {
  if ( $('.new-password-settings-repeat').val() == '' ) {
    my_alert ('Введите значение повтора пароля', 'fail');
    return;
  }

  if ( $('.new-password-settings-repeat').val() != $('.new-password-settings').val() ) {
    my_alert ('Пароли не совпадают', 'fail');
    return;
  }

  $.ajax({
    url: '/ajax',
    data: { save_password: $('.new-password-settings').val(), old_password: $('.old-password-settings').val() },
    type: 'post',
    success: function(ans) {   
      if (ans.length > 5) {
        ans = ans.split('#');
        my_alert (ans[0],ans[1]);
      } else {
        if ( $('.emeil-settings').val() == '' || $('.username-settings').val() == '' ) {
          my_alert ('Введите данные профиля', 'fail');
          return;
        }
  
      $.ajax({
        url: '/ajax',
        data: { save_profile: $('.emeil-settings').val(), username: $('.username-settings').val(), old_password: $('.new-password-settings').val() },
        type: 'post',
        success: function(ans) {   
          if (ans.length > 5) {
            ans = ans.split('#');
            my_alert (ans[0], ans[1]);
          } else {
            my_alert ('Профиль сохранен', 'success');
          }
        }
      });
      }
    }
  });
  } else {
    if ( $('.emeil-settings').val() == '' || $('.username-settings').val() == '' ) {
          my_alert ('Введите данные профиля', 'fail');
          return;
        }
  
      $.ajax({
        url: '/ajax',
        data: { save_profile: $('.emeil-settings').val(), username: $('.username-settings').val(), old_password: $('.old-password-settings').val() },
        type: 'post',
        success: function(ans) {   
          if (ans.length > 5) {
            ans = ans.split('#');
            my_alert (ans[0], ans[1]);
          } else {
            my_alert ('Профиль сохранен', 'success');
          }
        }
      });
  }

});

$(document).on('click','.comment-form-opener', function() {
  $(this).hide();
  $('.new-comment').show();
});

$(document).on('click', '.history-item', function() {
  var th = $(this).find('.history-dropdown-button').next();
  var hi = $(this);
  $('.history-item').not(hi).removeClass('open-menu');
  $('.history-dropdown').not(th).hide();
  th.toggle();
  hi.toggleClass('open-menu');
});

function Capitalize(str){
    var arr1 = str.split(" - ");
    var arr = arr1[0].split(' ');
    for(var i = 0; i< arr.length; i++)
    {
    arr[i] = arr[i].charAt(0).toUpperCase() + arr[i].slice(1);
    }
    arr1[0] = arr.join(" ");
    arr1[1] = arr1[1].charAt(0).toUpperCase() + arr1[1].slice(1);

    return arr1.join(' - ');
} 

$(document).on('click','.history-copy', function() {
  $(this).closest('.history-dropdown').hide();
  $(this).closest('.history-item').removeClass('open-menu');
  var text = $(this).closest('.history-item').find('.history-song').text();
  text = Capitalize(text.replaceAll('  ', ' ').trim());
  navigator.clipboard.writeText( text )
      .then(() => {
        my_alert('Скопировано', 'success');
  });
});

$(document).on('click','.history-dropdown a', function() {
  $(this).closest('.history-dropdown').hide();
  $(this).closest('.history-item').removeClass('open-menu');
});

  $(document).on('click', '.send-button.active', function() {
    $(this).removeClass('active');
    if ($('.new-comment-text').val() == '') {
      my_alert ('Пустой текст комментария', 'fail');
      return false;
    }

    if ($('.user_id').val() == 0 && $('.user_name').val() == '') {
      my_alert ('Заполните имя', 'fail')
      $(this).addClass('active');
      return false;
    }

      $.ajax({
        url: '/ajax',
        data: { 
          send_comment: $('.new-comment-text').val(),
          user_name: $('.user_name').val(),
          station_id: $(this).attr('data-station_id'), 
          reply_id: $('.new-comment-text').attr('data-reply_id')
        },
        type: 'post',
        success: function(ans) {   
           if ( ans.indexOf('######') != -1 ) {
             my_alert ( ans.split('######')[0], ans.split('######')[1] );
             $('.send-button').addClass('active');
             if (ans.split('######')[1] == 'success') {
               $('.new-comment-text').val('').attr('data-reply_id', 0);
               $('.new-comment .reply').hide();
               $('.send-button img').attr('src', '/images/send-comment-gray.png');               
             }
           } else {
             $('.comments-list').prepend(ans);
             $('.new-comment-text').val('').attr('data-reply_id', 0);
             $('.new-comment .reply').hide();
             topSc = $('.comments-list-wrapper').prop('scrollHeight');
             $('.comments-list-wrapper').scrollTop(topSc);
             $('.send-button img').attr('src', '/images/send-comment-gray.png');
           }
        }
      });

  });
/*
  $(document).on('scroll', '.comments-list-wrapper', function () {
    topSc = $(this).scrollTop();
    console.log(topSc);
  });
*/
  $(document).on('click', '.bottom-menu-button', function() {
    $('.copy-title-button, .ytube-search-button').toggle();
  });

  $(document).on('click', '.copy-title-button', function() {
      navigator.clipboard.writeText( $('.bottom-player .song-title').eq(0).text() + ' - ' + $('.bottom-player .song-artist').eq(0).text())
      .then(() => {
        my_alert('Скопировано', 'success');
      });
  });

  $(document).on('click', '.ytube-search-button', function() {
    var search = encodeURI ( $('.bottom-player .song-artist').text() );

    window.open( 'https://www.youtube.com/results?search_query=' + search, '_blank');
  });

  $(document).on('click', '.button-reply', function (){
    /* if ( $('.user_id').val() == 0 ) {
      show_login ();
    } else { */
      var c = $(this).closest('.comment-in-list');

      $('.comment-form-opener').hide();
      $('.new-comment').show();

      $('.new-comment .reply .comment-data-user').text( c.find('.comment-data .comment-data-user.main-data').text() );
      $('.new-comment .reply .comment-data-date').text( c.find('.comment-data .comment-data-date.main-data').text() );
      $('.new-comment .reply .comment-text').text( c.find('.comment-in-list-wrapper .comment-text.main-data .main-text').text() );
      $('.new-comment .reply .comment-in-list-avatar').attr( 'src', c.find('.comment-in-list-avatar.main-data').attr('src') );
      $('.new-comment .reply').show();

      $('.new-comment-text').attr('data-reply_id', c.attr('data-comment_id')).focus();
    //}
  });

  $(document).on('click', '.reply-close', function (){

      $('.new-comment .reply').hide();
      $('.new-comment-text').attr('data-reply_id', 0 ).focus();

  });

  $(document).on('click', '.comment-dropdown-menu-button', function() {
    $('.comment-dropdown-menu-button').not($(this)).closest('.comment-dropdown-menu').find('.comment-dropdown-menu-list').hide();
    $(this).closest('.comment-dropdown-menu').find('.comment-dropdown-menu-list').toggle();
  });

  $(document).on('click', '.abuse-comment', function(){
    $(this).closest('.comment-dropdown-menu').find('.comment-dropdown-menu-list').hide();
    $.ajax({
      url: '/ajax',
      data: { send_abuse : $(this).attr('data-comment_id')},
      type: 'post',
      success: function(ans) {  
        my_alert ('Жалоба отправлена', 'success');
      }
    });
  })


  $(document).on('click', '.delete-comment', function(){

      var th = $(this);

      $(this).closest('.comment-dropdown-menu').find('.comment-dropdown-menu-list').hide();
  
      $.ajax({
        url: '/ajax',
        data: { delete_comment: th.attr('data-comment_id'), station_id: th.attr('data-station_id') },
        type: 'post',
        success: function(ans) {   
          $('.comments-list-wrapper').load( document.location.href + ' .comments-list');
        }
      });
  });

  $(document).on('click', '.more-history-item', function() {
    $('.history-item').removeClass('only-desctop');
    $(this).hide();
  })

  $(document).on('click', '.soc-share-mobile', function() {
    $('.soc-share').toggleClass('mobile-hidden');
  })

  $(document).on('click', '.rating-block-button', function() {
    $('.rating-block').toggleClass('mobile-show');
  })

  $(document).on('click', '.show-mobile-comment-form', function() {
    $('.new-comment').show();
    $(this).hide();
  })

  $(document).on('click','.ajax-load-more', function() { 
    var th = $(this);
    th.addClass('loader');
    var th = $(this);
    th.addClass('waiting-load');
    var objects = $('<div/>');
    objects.load( $(this).find('a').attr('href') + ' .station-list-ajax', function() {
      th.closest('.row').remove();
      //console.log(objects);
      objects.find('.col-md-five').appendTo('.station-list-ajax');
      objects.find('.row').appendTo('.station-list-ajax');

      lazyload();
      cards_cat_check();
/*      
      (adsbygoogle = window.adsbygoogle || []).push({});
      (adsbygoogle = window.adsbygoogle || []).push({});
      (adsbygoogle = window.adsbygoogle || []).push({});
*/     
      //$('html').getNiceScroll().resize();

      th.removeClass('loader');
    });
    return false;
  });

  $(document).on('click','.similar-station-button', function() { 
    var th = $(this);
    th.addClass('loader');
    $.ajax({
      url: '/ajax',
      data: { similar_station: th.attr('data-catlist'), start: th.attr('data-start'), station_id: th.attr('data-station_id') },
      type: 'post',
      success: function(ans) {
        if (ans.length) {
          ans = ans.split('######');
          $('.stations-list-wrapper.similar-station-block .stations-list-inner').append(ans[0]);
          lazyload();
          cards_cat_check();
          if (ans.length > 1) {
            $('.similar-station-button').attr('data-start', $('.similar-station-button').attr('data-start')*1 + 8);
          } else {
            $('.similar-station-button').hide();
          }
          th.removeClass('loader');
        }
      }
    });
    return false;
  });

  $(document).on('click', '.vk-auth', function() {
    document.location.href = '/vk_auth.php';
  });

  $(document).on('click', '.ok-auth', function() {
    setTimeout(function() {
    document.location.href = '/ok_auth.php';
    }, 300);
  });

  $(document).on('click', '.fb-auth', function() {
    setTimeout(function() {
    document.location.href = '/fb_auth.php';
    }, 300);
  });


  cards_cat_check();
  genres_control_check ();

  $.ajax({
      url: '/emoj',
      type: 'post',
      success: function(e) {
        $('.emojiPicker').append(e);
        console.log (emojis.length);
        setTimeout ( function() {
          for ( var i = 0; i < emojis.length; i++ ) {
            $('.emojiPicker').find('.sections .emoji[smile="emoji-'+emojis[i].name+'"]').text( toUnicode(emojis[i].unicode['apple']) );
            if (emojis[i].name == 'plus1') {
               console.log ('-----', toUnicode(emojis[i].unicode['apple']) );
            }
          }
        }, 500 );
      }
  });

  function updatePosition ($el) {
    
    var $picker = $('.emojiPicker');


    var positionedParent = $picker.offsetParent();
    var parentOffset = positionedParent.offset(); // now have a top/left object

    // Step 2
    var elOffset = $el.offset();
    elOffset.top += $el.outerHeight();

    var diffOffset = {
        top: (elOffset.top - parentOffset.top),
        left: (elOffset.left - parentOffset.left)
      };
    
    $picker.css({
      top: diffOffset.top,
      left: diffOffset.left
    });

    return;
  }
  
  
  $(document).on('click', '.smile-button', function() { 
  
    //if ($('.user_id').val() != 0) {
      updatePosition ($(this));
      $('.emojiPicker').toggle();
    /*
    } else {
        show_login();
        return false;
    }
    */
  });
  
  $(document).on('click', '.emojiPicker .tab', function(e) {
    var section = '';
    var $picker = $('.emojiPicker');
    // Update tab
    $picker.find('nav .tab').removeClass('active');
    if ($(e.target).parent().hasClass('tab')) {
      section = $(e.target).parent().attr('data-tab');
      $(e.target).parent('.tab').addClass('active');
    }
    else {
      section = $(e.target).attr('data-tab');
      $(e.target).addClass('active');
    }

    var $section = $picker.find('section.' + section);

    var heightOfSectionsHidden = $section.parent().scrollTop();
    var heightOfSectionToPageTop = $section.offset().top;
    var heightOfSectionsToPageTop = $section.parent().offset().top;

    var scrollDistance = heightOfSectionsHidden
                         + heightOfSectionToPageTop
                         - heightOfSectionsToPageTop;

    $('.sections').off('scroll'); // Disable scroll event until animation finishes

    var that = this;
    $('.sections').animate({
      scrollTop: scrollDistance
    }, 250, function() {
      $picker.find('.sections').on('scroll', $.proxy(that.emojiScroll, that) ); // Enable scroll event
    });
  });
  
  $(document).on('scroll', '.emojiPicker', function(e) {
    var sections = $('section');
    $.each(sections, function(key, value) {
      var section = sections[key];
      var offsetFromTop = $(section).position().top;

      if (offsetFromTop <= 0) {
        $(section).parents('.emojiPicker').find('nav .tab').removeClass('active');
        $(section).parents('.emojiPicker').find('nav .tab[data-tab=' + section.className + ']').addClass('active');
      }
    });
  });
  
  function findEmoji(emojiShortcode) {
    for (var i = 0; i < emojis.length; i++) {
      if (emojis[i].shortcode == emojiShortcode) {
        return emojis[i];
      }
    }
  }

  var endSelection = 0;


  
  function insertAtCaret(myValue) {
    $('.new-comment-text').val($('.new-comment-text').val() + myValue);
    var l = $('.new-comment-text').val().length;
    if ( l > 200 ) {
      $('.new-comment-text').val($('.new-comment-text').val().substr(0, 200));
      l = 200;
    }
    $('.symbol-count').text(l);
    if (l>0) {
      $('.send-button').addClass('active');
      $('.send-button img').attr('src', '/images/send-comment.png');
    }
    else {
      $('.send-button').removeClass('active');
      $('.send-button img').attr('src', '/images/send-comment-gray.png');
    }
  }
  
  
  function toUnicode(code) {
    var codes = code.split('-').map(function(value, index) {
      return parseInt(value, 16);
    });
    //console.log(String.fromCodePoint.apply(null, codes));
    return String.fromCodePoint.apply(null, codes);
  }

  $(document).on('click', '.emojiPicker div.wrap > div', function(e) {
    
    var emojiSpan = $(e.target);

    var emojiShortcode = emojiSpan.attr('smile').split('emoji-')[1];
    var emojiUnicode = toUnicode(findEmoji(emojiShortcode).unicode['apple']);

    insertAtCaret(emojiUnicode);
    
    //$('.emojiPicker').hide();
    
    // For anyone who is relying on the keyup event
    /*
    $(this.element).trigger("keyup");

    // trigger change event on input
    var event = document.createEvent("HTMLEvents");
    event.initEvent("input", true, true);
    this.element.dispatchEvent(event);  
    */  
  });


  if ( $('.station_id').val() != 0) {
      $('head').prepend('<link rel="stylesheet" type="text/css" href="/css/jquery.emojipicker.css">');
      load_css = false;
  }

  $(document).on('click','.soc-share-opener', function() {
    $('.soc-share').show();
  });

  //$('modal').modal({backdrop: 'static', keyboard: false});
/*
  $(document).scroll(function() {
    if($(this).scrollTop() > 300) {
      $('#rightad').css('top', '300px');
    } else {
      $('#rightad').css('top', '22px');
    }
  })
*/

  load_page_scripts();
})

</script>



</body></html>